include $(top_srcdir)/globus_automake_pre
include $(top_srcdir)/globus_automake_pre_top

# SUBDIRS is an automake macro which contains 
# the list of subdirectories that have Makefile.am's
SUBDIRS = \
	pkgdata \
	doxygen

Scripts = \
	TESTS.pl \
	globus-io-authorization-test.pl \
        globus-io-file-test.pl \
        globus-io-tcp-test.pl \
        run-io-tests.pl

# INCLUDES is an automake macro which contains 
# the include directives (-I..) for the compiler.
#
# GPT_INCLUDES contains the include directives generated by GPT 
# from the dependent packages.
INCLUDES = $(GPT_INCLUDES)

# bin_PROGRAMS is an automake macro which contains
# a list of programs that are to be installed in a certain directory.
# bin is $prefix/bin
# noinst means that the programs are not installed in any directory.
# You can also use the following:
# sbin is $prefix/sbin
# libexec is $prefix/libexec
# You can also use any directory defined by a macro of the form 
# <directory_name>dir

test_PROGRAMS = \
	globus_io_tcp_test \
	globus_io_tcp_test_server \
	globus_io_tcp_test_client \
	globus_io_file_test \
	globus_io_authorization_test

test_SCRIPTS = $(Scripts)

globus_io_tcp_test_SOURCES = globus_io_tcp_test.c
globus_io_tcp_test_LDFLAGS = $(GPT_LDFLAGS)
globus_io_tcp_test_LDADD = $(GPT_PGM_LINKS)

globus_io_tcp_test_server_SOURCES = globus_io_tcp_test_server.c
globus_io_tcp_test_server_LDFLAGS = $(GPT_LDFLAGS)
globus_io_tcp_test_server_LDADD = $(GPT_PGM_LINKS)

globus_io_tcp_test_client_SOURCES = globus_io_tcp_test_client.c
globus_io_tcp_test_client_LDFLAGS = $(GPT_LDFLAGS)
globus_io_tcp_test_client_LDADD = $(GPT_PGM_LINKS)

globus_io_file_test_SOURCES = globus_io_file_test.c
globus_io_file_test_LDFLAGS = $(GPT_LDFLAGS)
globus_io_file_test_LDADD = $(GPT_PGM_LINKS)

globus_io_authorization_test_SOURCES = globus_io_authorization_test.c
globus_io_authorization_test_LDFLAGS = $(GPT_LDFLAGS)
globus_io_authorization_test_LDADD = $(GPT_PGM_LINKS)

EXTRA_DIST = \
	TESTS.pl \
	globus-io-authorization-test.pl \
        globus-io-file-test.pl \
        globus-io-tcp-test.pl \
        run-io-tests.pl.in

CLEANFILES = run-io-tests.pl

run-io-tests.pl: $(srcdir)/run-io-tests.pl.in
	$(REWRITE_SCRIPT_PREFIXES) < $< > $@

include $(top_srcdir)/globus_automake_post
include $(top_srcdir)/globus_automake_post_top
