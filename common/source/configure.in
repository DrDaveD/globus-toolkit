dnl

AC_REVISION($Revision$)
AC_INIT(Makefile.am)

GLOBUS_INIT


AM_PROG_LIBTOOL

dnl config header goes here

dnl Initialize the automake rules the last argument
AM_INIT_AUTOMAKE($GPT_NAME, $GPT_VERSION)

AM_CONFIG_HEADER(config.h library/globus_common.h:library/globus_common.h.in)

dnl Determine thread library flags
if test "x$NO_FLAVOR" = "x"; then
LAC_THREADS

fi
dnl Check for large file support before doing any other probes, it may
dnl change prototypes for some functions.
AC_SYS_LARGEFILE

AC_TYPE_SIGNAL

CHECK_HEADERS

CHECK_FUNCS

CHECK_FOR_TIMESPEC

CHECK_FOR_IOVEC

CHECK_FOR_TCPFASTACK

CHECK_FOR_ATEXIT

CHECK_REENTRANT_FUNCS

CHECK_SIZES

CHECK_NEED_LNSL

GPT_SET_LIBS(["$THREAD_LIB_FLAGS $EXTERNAL_LIBS"])

AC_SUBST(GLOBUS_THREADS)

LAC_DOXYGEN("../library")

GLOBUS_FINALIZE

AC_OUTPUT(
	Makefile
	pkgdata/Makefile
	pkgdata/pkg_data_src.gpt
	library/Makefile
	programs/Makefile
	config/Makefile
	doxygen/Makefile
	doxygen/Doxyfile 
	doxygen/Doxyfile-internal	
	,
	$GPT_LOCATION/sbin/gpt_generate_bin_pkg_data \
	--flavor=$GLOBUS_FLAVOR_NAME "$srcdir/pkgdata/pkg_data_src.gpt"
	,
	GLOBUS_FLAVOR_NAME=$GLOBUS_FLAVOR_NAME
	GPT_LOCATION=$GPT_LOCATION
	srcdir=$srcdir

)





