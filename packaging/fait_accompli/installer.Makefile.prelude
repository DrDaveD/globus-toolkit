all: gpt @prewsgram@ @prewsgridftp@ @prewsmds@ @rls@ @wsjava@ @wsmds@ @wsdel@ @wsrft@ @wsgram@ @wsgramcondor@ @wsgramlsf@ @wsgrampbs@ @wscas@ @wsc@ @i18n@ @tests@ @wstests@ postinstall
GLOBUS_LOCATION=@prefix@
GPT_LOCATION=@prefix@
GLOBUS_IODBC_PATH=@globus_iodbc@
export GLOBUS_IODBC_PATH GPT_LOCATION GLOBUS_LOCATION
BUILD_OPTS=@buildopts@
FLAVOR=@flavor@
THR=@thr@

# Functional group dependencies, expressed in bundles.
i18n: gpt globus-internationalization globus-internationalization-thr
prewsgram: gpt globus-resource-management-server globus-resource-management-client globus-resource-management-sdk globus-resource-management-sdk-thr
prewsgridftp: gpt globus-data-management-server globus-data-management-client globus-data-management-sdk globus-data-management-sdk-thr
prewsmds: gpt globus-information-services-server globus-information-services-client globus-information-services-sdk
rls: gpt globus-rls-server
wsjava: gpt gt4-java-ws-core gt4-java-ws-core-test
wsmds: gpt wsjava gt4-mds gt4-mds-test
wsdel: gpt wsjava gt4-delegation
wsrft: gpt wsjava gt4-delegation gt4-rft gt4-rft-test
wsgram: gpt globus-resource-management-server globus-data-management-server wsjava gt4-mds wsrft gt4-gram gt4-gram-test
wscas: gpt wsjava gt4-cas
wsc: gpt gt4-c-ws-core gt4-c-ws-core-test
wstests: gpt gt4-java-ws-core-test gt4-c-ws-core-test gt4-mds-test gt4-gram-test gt4-cas-delegation-test gt4-rft-test

# GPT targets
gpt:
	cd gpt-3.2autotools2004 && ./build_gpt
postinstall:
	${GPT_LOCATION}/sbin/gpt-postinstall

# Contrib targets
myproxy:
	${GPT_LOCATION}/sbin/gpt-build ${BUILD_OPTS} -srcdir=contrib/myproxy-1.15 ${FLAVOR}
gsi_openssh:
	${GPT_LOCATION}/sbin/gpt-build ${BUILD_OPTS} -srcdir=contrib/gsi_openssh-3.5-src ${FLAVOR}
gsi_openssh_setup:
	${GPT_LOCATION}/sbin/gpt-build ${BUILD_OPTS} -srcdir=contrib/gsi_openssh_setup-3.5-src ${FLAVOR}

# Bundle dependencies, expressed in packages.
