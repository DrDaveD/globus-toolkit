#! /usr/bin/perl

@GLOBUS_PERL_INITIALIZER@

use strict;
use TAP::Harness::JUnit;
require 5.005;
use vars qw(@tests);

my $testdir = $0;
if ($testdir =~ m|/|)
{
    $testdir =~ s|/+[^/]*$||;
}
else
{
    $testdir = '.';
}

my $test_result = 1;
$|=1;

@tests = ();

if (-d "$testdir/seg")
{
    push(@tests, "$testdir/seg/test-fork-seg.pl");
}
else
{
    push(@tests, "$testdir/test-fork-seg.pl");
}

my $harness = TAP::Harness::JUnit->new({
        xmlfile => 'globus_gram_job_manager_fork_test.xml',
        merge => 1});
$harness->runtests(@tests);
