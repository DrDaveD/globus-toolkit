<?xml version="1.0"?>

<!-- ===================================================================

Notes:
   This is a build file for use with the Jakarta Ant build tool.

Prerequisites:

   jakarta-ant from http://jakarta.apache.org


Build Instructions:

   This file is automatically called at the end of the deployment
   of the corresponding component's gar (see build-packages.xml).

==================================================================== -->
<project default="all" basedir=".">

    <property environment="env"/>
    
    <property file="build.properties"/>
    <property file="${user.home}/build.properties"/>
    
    <property name="env.GLOBUS_LOCATION" value="."/>
    <property name="deploy.dir" location="${env.GLOBUS_LOCATION}"/>
    <property name="abs.deploy.dir" location="${deploy.dir}"/>
    <property name="build.launcher" 
        location="${abs.deploy.dir}/share/globus_wsrf_common/build-launcher.xml"/>

    <target name="setup" >
        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="globus-usage-receiver"/>
            <property name="class.name" 
                value="org.globus.usage.receiver.Receiver"/>
        </ant>
        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="globus-usage-babysitter"/>
            <property name="class.name" 
                value="org.globus.usage.receiver.Babysitter"/>
        </ant>
        <ant antfile="${build.launcher}" 
             target="generateLauncher">
            <property name="launcher-name" value="globus-usage-dumper"/>
            <property name="class.name" 
                value="org.globus.usage.receiver.PacketDumper"/>
        </ant>
        <copy file="etc/receiver.properties.sample"
              tofile="${deploy.dir}/etc/globus_usage_receiver/receiver.properties">
              <filterset>
                <filter token="USER" value="${user.name}"/>
              </filterset>
        </copy>
    </target>
        
</project>
