dnl

AC_REVISION($Revision$)
AC_INIT(Makefile.am)

GLOBUS_INIT

AM_PROG_LIBTOOL

dnl config header goes here

dnl Initialize the automake rules the last argument
AM_INIT_AUTOMAKE($GPT_NAME, $GPT_VERSION)


LAC_DOXYGEN([" ../ "])

# set-perms must come before any other test that expects the
# permissions on the client and server keys to be set correctly
TEST_SCRIPTS="set-perms.sh gssapi-auth-test.sh"
TEST_SCRIPTS="$TEST_SCRIPTS gssapi-om-uint-size-test.sh"
TEST_EXECS="$TEST_SCRIPTS"
AC_SUBST(TEST_EXECS)

CLIENT_CERTDIR=${srcdir}/test-client-cert
AC_SUBST(CLIENT_CERTDIR)

SERVER_CERTDIR=${srcdir}/test-server-cert
AC_SUBST(SERVER_CERTDIR)

CA_CERTDIR=${srcdir}/test-certdir
AC_SUBST(CA_CERTDIR)


GLOBUS_FINALIZE

AC_OUTPUT(
	Makefile
	pkgdata/Makefile
	pkgdata/pkg_data_src.gpt
        gssapi-auth-test.sh
	run-tests
	set-perms.sh
	Makefile
	test-certdir/Makefile
	doxygen/Makefile
	doxygen/Doxyfile
	doxygen/Doxyfile-internal
	,
	$GPT_LOCATION/sbin/gpt_generate_bin_pkg_data \
	--flavor=$GLOBUS_FLAVOR_NAME "./pkgdata/pkg_data_src.gpt"
	,
	GLOBUS_FLAVOR_NAME=$GLOBUS_FLAVOR_NAME
	GLOBUS_LOCATION=$GLOBUS_LOCATION
	GPT_LOCATION=$GPT_LOCATION
)
