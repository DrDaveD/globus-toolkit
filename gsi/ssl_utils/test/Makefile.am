include $(top_srcdir)/globus_automake_pre
include $(top_srcdir)/globus_automake_pre_top

# SUBDIRS is an automake macro which contains 
# the list of subdirectories that have Makefile.am's
SUBDIRS= \
	test-certdir \
	pkgdata \
	doxygen

test_PROGRAMS = \
	gss-client \
	gss-server \
	gssapi-om-uint-size-test-1 \
	gssapi-om-uint-size-test-2

test_SCRIPTS = gssapi-auth-test.sh \
	gssapi-om-uint-size-test.sh \
	set-perms.sh \
	run-tests

EXTRA_DIST = $(test_SCRIPTS)


##gss_assist_client_SOURCES = gss-assist-client.c
gss_client_SOURCES = gss-client.c gss-misc.c gss-misc.h
gss_server_SOURCES = gss-server.c gss-misc.c gss-misc.h
gssapi_om_uint_size_test_1_SOURCES = gssapi-om-uint-size-test-1.c
gssapi_om_uint_size_test_2_SOURCES = gssapi-om-uint-size-test-2.c


##gss_assist_client_LDADD = $(GPT_PGM_LINKS)
gss_client_LDADD = $(GPT_PGM_LINKS)
gss_server_LDADD = $(GPT_PGM_LINKS)
gssapi_om_uint_size_test_1_LDADD = $(GPT_PGM_LINKS)
gssapi_om_uint_size_test_2_LDADD = $(GPT_PGM_LINKS)

##gss_assist_client_LDFLAGS = $(GPT_LDFLAGS)
gss_client_LDFLAGS = $(GPT_LDFLAGS)
gss_server_LDFLAGS = $(GPT_LDFLAGS)
gssapi_om_uint_size_test_1_LDFLAGS = $(GPT_LDFLAGS)
gssapi_om_uint_size_test_2_LDFLAGS = $(GPT_LDFLAGS)

# INCLUDES is an automake macro which contains 
# the include directives (-I..) for the compiler.
#
# GPT_INCLUDES contains the include directives generated by GPT 
# from the dependent packages.
INCLUDES += $(GPT_INCLUDES)


all-local:
	@list='$(test_SCRIPTS)'; for p in $$list; do \
	  if test -f $$p; then \
		chmod 755  $$p; \
	  else :; fi; \
	done


include $(top_srcdir)/globus_automake_post
include $(top_srcdir)/globus_automake_post_top

