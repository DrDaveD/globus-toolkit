dnl

AC_REVISION($Revision$)
AC_INIT(Makefile.am)

GLOBUS_INIT

AM_PROG_LIBTOOL

dnl config header goes here

dnl Initialize the automake rules the last argument
AM_INIT_AUTOMAKE($GPT_NAME, $GPT_VERSION)
AM_CONFIG_HEADER(library/globus_gssapi_config.h)

if test "$cross_compiling" = "no"; then
    AC_C_BIGENDIAN
    AC_CHECK_SIZEOF(short)
    AC_CHECK_SIZEOF(long)
else
    case "$target" in
      i860-intel-osf* )
        ac_cv_c_bigendian=no
        ac_cv_sizeof_short=2
        ac_cv_sizeof_long=4
        ;;
      * )
        ac_cv_c_bigendian=yes
        ac_cv_sizeof_short=2
        ac_cv_sizeof_long=4
        ;;
    esac
    echo "guessing whether byte ordering is big endian... $ac_cv_c_bigendian"
    echo "guessing size of short... $ac_cv_sizeof_short"
    echo "guessing size of long... $ac_cv_sizeof_long"
fi

dnl this was for before dependencies worked, so it would build.  not deleted
dnl yet, just for reference.  EBB
dnl GPT_SET_LIBS("-lglobus_ssl_utils_$GLOBUS_FLAVOR_NAME")

GLOBUS_FINALIZE

AC_OUTPUT(
	Makefile
	pkgdata/Makefile
	pkgdata/pkg_data_src.gpt
	library/Makefile
	,
	$GPT_LOCATION/sbin/gpt_generate_bin_pkg_data \
	--flavor=$GLOBUS_FLAVOR_NAME "./pkgdata/pkg_data_src.gpt"
	,
	GLOBUS_FLAVOR_NAME=$GLOBUS_FLAVOR_NAME
	GPT_LOCATION=$GPT_LOCATION
)

