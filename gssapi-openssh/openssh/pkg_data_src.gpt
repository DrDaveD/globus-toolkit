<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE gpt_package_metadata SYSTEM "globus_package.dtd">

<gpt_package_metadata Format_Version="0.02" Name="gsi_openssh" >

  <Aging_Version Age="0" Major="0" Minor="3" />
  <Description>GSI-OpenSSH 3.1p1 package</Description>
  <Functional_Group >gsi_openssh</Functional_Group>
  <Version_Stability Release="beta" />

  <src_pkg >

    <Build_Environment >
      <cflags ></cflags>
      <external_includes ></external_includes>
      <pkg_libs >-lglobus_gss_assist_$GLOBUS_FLAVOR_NAME -lglobus_gssapi_gsi_$GLOBUS_FLAVOR_NAME -lssl_$GLOBUS_FLAVOR_NAME -lcrypto_$GLOBUS_FLAVOR_NAME</pkg_libs>
      <external_libs >-lutil -lz -lnsl -lcrypt</external_libs>
    </Build_Environment>

    <With_Flavors build="yes" />

    <Version_Label>3.1p1</Version_Label>

    <Source_Dependencies Type="compile" >
      <Dependency Name="globus_openssl"><Version><Version_Range Upper_Major="1000" Lower_Major="0" Upper_Minor="1000" Lower_Minor="3" /></Version></Dependency>
      <Dependency Name="globus_gssapi_gsi"><Version><Simple_Version Major="2"></Simple_Version></Version></Dependency>
      <Dependency Name="globus_gss_assist"><Version><Simple_Version Major="2"></Simple_Version></Version></Dependency>
    </Source_Dependencies>

    <Source_Dependencies Type="pgm_link" >
      <Dependency Name="globus_openssl"><Version><Version_Range Upper_Major="1000" Lower_Major="0" Upper_Minor="1000" Lower_Minor="3" /></Version></Dependency>
      <Dependency Name="globus_gss_assist"><Version><Simple_Version Major="2"></Simple_Version></Version></Dependency>
    </Source_Dependencies>

    <Source_Dependencies Type="lib_link" >
      <Dependency Name="globus_gssapi_gsi"><Version><Simple_Version Major="2"></Simple_Version></Version></Dependency>
    </Source_Dependencies>

    <Source_Setup_Dependencies PkgType="pgm" >
      <Setup_Dependency Name="globus_ssl_utils_setup" > <Version > <Simple_Version Major="2" /> </Version> </Setup_Dependency>
      <Setup_Dependency Name="gsi_openssh_setup"> <Version > <Simple_Version Major="2" /> </Version> </Setup_Dependency>
    </Source_Setup_Dependencies>

    <Build_Instructions>

      <Build_Step>
        . $GLOBUS_LOCATION/libexec/globus-build-env-FLAVOR_GPTMACRO.sh

        if test "STATIC_LINK_GPTMACRO" = "yes"; then
          static_option=--enable-static-only
        fi

        ./configure --prefix=INSTALLDIR_GPTMACRO --with-globus=INSTALLDIR_GPTMACRO --with-globus-flavor=FLAVOR_GPTMACRO --disable-suid-ssh $static_option GSI_OPENSSH_GPTMACRO
      </Build_Step>

      <Build_Step>
        MAKE_GPTMACRO gpt-all
      </Build_Step>

      <Build_Step>
        MAKE_GPTMACRO gpt-install
      </Build_Step>

    </Build_Instructions>

  </src_pkg >

</gpt_package_metadata>
