dnl

AC_INIT(Makefile.am)

GLOBUS_INIT

AM_PROG_LIBTOOL

AC_CONFIG_AUX_DIR(.)

dnl Initialize the automake rules the last argument
AM_INIT_AUTOMAKE($GPT_NAME, $GPT_VERSION)

AC_MSG_CHECKING([if compiler supports -Wno-unused])
echo "int main(void) { return 0; }" > conftest.c
if test "X`$CC -Wno-unused -c conftest.c 2>&1`" = "X" ; then
    AC_MSG_RESULT(yes)
    CFLAGS="$CFLAGS -Wno-unused"
else
    AC_MSG_RESULT(no)
fi

LAC_DOXYGEN("../ ./", "*.dox")

GLOBUS_INSTALLDIR=$GLOBUS_LOCATION
AC_SUBST(GLOBUS_INSTALLDIR)

CFLAGS="$CFLAGS -DGLOBUS_BUILTIN"
    
GLOBUS_FINALIZE

PACKAGENAME="gridftp_server_info"
AC_SUBST(PACKAGENAME)

INCLUDEPATH=""
AC_SUBST(INCLUDEPATH)

OUTPUTHEADERS="backendPool.h backendPoolType.h backendPoolType_array.h GridFTPServerInfoPortTypeGTWSDLResourceProperties.h GridFTPServerInfoPortTypeGTWSDLResourcePropertiesType.h GridFTPServerInfoPortTypeGTWSDLResourcePropertiesType_array.h frontendInfo.h frontendInfoType.h frontendInfoType_array.h backendInfo.h backendInfoType.h backendInfoType_array.h GridFTPServerInfoService.h GridFTPServerInfoService_skeleton.h GridFTPServerInfoService_internal_skeleton.h "
AC_SUBST(OUTPUTHEADERS)

OUTPUTTYPES="backendPool.c backendPoolType.c GridFTPServerInfoPortTypeGTWSDLResourceProperties.c GridFTPServerInfoPortTypeGTWSDLResourcePropertiesType.c frontendInfo.c frontendInfoType.c backendInfo.c backendInfoType.c GridFTPServerInfoService_type_registry.c "
AC_SUBST(OUTPUTTYPES)

OUTPUTCLIENT=""
AC_SUBST(OUTPUTCLIENT)

OUTPUTTYPESOBJECTS="backendPool.lo backendPoolType.lo GridFTPServerInfoPortTypeGTWSDLResourceProperties.lo GridFTPServerInfoPortTypeGTWSDLResourcePropertiesType.lo frontendInfo.lo frontendInfoType.lo backendInfo.lo backendInfoType.lo GridFTPServerInfoService_type_registry.lo "
AC_SUBST(OUTPUTTYPESOBJECTS)

OUTPUTCLIENTOBJECTS=""
AC_SUBST(OUTPUTCLIENTOBJECTS)

AC_OUTPUT(
	Makefile
	pkgdata/Makefile
	pkgdata/pkg_data_src.gpt
        doxygen/Makefile
        doxygen/Doxyfile
        doxygen/Doxyfile-internal
       GridFTPServerInfoService/Makefile

)
