/*
 * Copyright 1999-2006 University of Chicago
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */


/*
 * This file is automatically generated by the Globus WSDLtoC converter
 */

#include "globus_soap_message.h"
#include "GridFTPServerInfoService.h"
#include "GridFTPServerInfoService_skeleton.h"
#include "GridFTPServerInfoService_internal_skeleton.h"
#include "version.h"
#include "globus_soap_message_fault.h"
#include "globus_ws_addressing.h"
#include "globus_wsrf_resource.h"

static
int
GridFTPServerInfoService_activate(void);

static
int
GridFTPServerInfoService_deactivate(void);

GlobusExtensionDefineModule(GridFTPServerInfoService) = 
{
    "GridFTPServerInfoService",
    GridFTPServerInfoService_activate,
    GridFTPServerInfoService_deactivate,
    NULL,
    NULL,
    &local_version
};

GlobusDebugDefine(GRIDFTPSERVERINFOSERVICE);

xsd_QName GridFTPServerInfoService_service_qname =
{
    "http://gridftp.globus.org/2006/06/GridFTPServerInfo/service",
    "GridFTPServerInfoService"
};

globus_service_descriptor_t             GridFTPServerInfoService_descriptor =
{
    &GridFTPServerInfoService_service_qname,
    GLOBUS_SERVICE_ENGINE_MODULE_PATH_PREFIX "/" GRIDFTPSERVERINFOSERVICE_BASE_PATH,
    NULL,
    NULL,
    NULL,
    NULL,
    globus_resource_id_get_as_string,
    NULL
};


xsd_QName GridFTPServerInfoPortType_GetCurrentMessage_op_qname = 
{
    "http://localhost:8080/wsrf/services/GridFTPServerInfoService"
    "GetCurrentMessage"
};

xsd_QName GridFTPServerInfoPortType_GetCurrentMessage_input_qname =
{
     "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd",
     "GetCurrentMessage"
};

typedef globus_result_t (* GetCurrentMessage_invoke_func_t) (
    globus_service_engine_t             engine,
    globus_soap_message_handle_t        message,
    globus_service_descriptor_t *       descriptor,
    wsnt_GetCurrentMessageType * GetCurrentMessage,
    wsnt_GetCurrentMessageResponseType * GetCurrentMessageResponse,
    const char ** fault_type_name,
    void ** fault);
    
typedef struct GetCurrentMessage_callback_handle_s
{
    globus_service_engine_t                 engine;
    globus_soap_message_handle_t            message;
    globus_operation_invoke_callback_func_t callback;
    void *                                  args;
} GetCurrentMessage_callback_handle_t;


const char * GridFTPServerInfoPortType_GetCurrentMessage_fault_strings[GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_TOPICNOTSUPPORTEDFAULT] =
{
    "Unknown",
    "ResourceUnknownFault",
    "NoCurrentMessageOnTopicFault",
    "InvalidTopicExpressionFault",
    "TopicNotSupportedFault"
 };

static
GridFTPServerInfoPortType_GetCurrentMessage_fault_t
GetCurrentMessage_lookup_fault_type(
    const char *                        fault_name)
{
    GridFTPServerInfoPortType_GetCurrentMessage_fault_t fault_type;
    GlobusFuncName(GetCurrentMessage_lookup_fault_type);
    GridFTPServerInfoServiceDebugEnter();

    globus_assert(fault_name);

    if(!strcmp(fault_name, "ResourceUnknownFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_RESOURCEUNKNOWNFAULT;
    }
    else if(!strcmp(fault_name, "NoCurrentMessageOnTopicFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_NOCURRENTMESSAGEONTOPICFAULT;
    }
    else if(!strcmp(fault_name, "InvalidTopicExpressionFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_INVALIDTOPICEXPRESSIONFAULT;
    }
    else if(!strcmp(fault_name, "TopicNotSupportedFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_TOPICNOTSUPPORTEDFAULT;
    }
    else
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_UNKNOWN_FAULT;
    }

    GridFTPServerInfoServiceDebugExit();
    return fault_type;
}


    
static
void
GetCurrentMessage_deserialize_callback(
    void *                              handle)
{
    GetCurrentMessage_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    GetCurrentMessage_invoke_func_t  invoke_function;
    wsnt_GetCurrentMessageType * GetCurrentMessage = NULL;
    GlobusFuncName(GetCurrentMessage_deserialize_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (GetCurrentMessage_callback_handle_t *) handle;

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "GetCurrentMessage",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    if(GridFTPServerInfoService_descriptor.registry)
    {
        globus_soap_message_handle_set_registry(
            callback_handle->message,
            GridFTPServerInfoService_descriptor.registry);
    }

    result = wsnt_GetCurrentMessageType_init(
        &GetCurrentMessage);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = wsnt_GetCurrentMessageType_deserialize(
        &GridFTPServerInfoPortType_GetCurrentMessage_input_qname,
        GetCurrentMessage,
        callback_handle->message,
        0);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = globus_soap_message_handle_set_attr(
        callback_handle->message,
        "GetCurrentMessageOperationInputParameter",
        wsnt_GetCurrentMessageType_copy_wrapper,
        wsnt_GetCurrentMessageType_destroy_wrapper,
        (void *)GetCurrentMessage);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

 exit:

    if (GetCurrentMessage != NULL)
    {
        wsnt_GetCurrentMessageType_destroy(GetCurrentMessage);
    }
    callback_handle->callback(
        result,
        callback_handle->args);

    free(callback_handle);
    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
GetCurrentMessage_deserialize(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    GetCurrentMessage_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(GetCurrentMessage_deserialize);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(GetCurrentMessage_callback_handle_t));
    globus_assert_string(callback_handle, 
                         "Memory allocation failed "
                         "for GetCurrentMessage callback handle");

    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        GetCurrentMessage_deserialize_callback,
        callback_handle);

    GridFTPServerInfoServiceDebugExit();
    return result;
}

static
void
GetCurrentMessage_invoke_callback(
    void *                              handle)
{
    GetCurrentMessage_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    GetCurrentMessage_invoke_func_t  invoke_function;
    wsnt_GetCurrentMessageType * GetCurrentMessage;
    wsnt_GetCurrentMessageResponseType GetCurrentMessageResponse;
     xsd_QName element_qname;
     const char * fault_type_name = NULL;
     GridFTPServerInfoPortType_GetCurrentMessage_fault_t fault_type = GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_NOFAULT;
     void *                              fault = NULL;
    
    GlobusFuncName(GetCurrentMessage_invoke_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (GetCurrentMessage_callback_handle_t *) handle;

    GetCurrentMessage = globus_soap_message_handle_get_attr(
        callback_handle->message,
        "GetCurrentMessageOperationInputParameter");
    globus_assert(GetCurrentMessage);

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "GetCurrentMessage",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }


    result = wsnt_GetCurrentMessageResponseType_init_contents(
        &GetCurrentMessageResponse);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }

    result = invoke_function(
        callback_handle->engine,
        callback_handle->message,
        &GridFTPServerInfoService_descriptor,
        GetCurrentMessage,
        &GetCurrentMessageResponse,
        &fault_type_name,
        &fault);

fault_exit:

    if(fault && fault_type_name)
    {
        fault_type = GetCurrentMessage_lookup_fault_type(fault_type_name);

        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }
        
        soap_fault.faultcode = "Server";
        soap_fault.faultstring = 
        "An error occurred while processing the message";
        soap_fault.faultactor = NULL;

        switch(fault_type)
        {
        
        case GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_RESOURCEUNKNOWNFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsnt_ResourceUnknownFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "ResourceUnknownFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_NOCURRENTMESSAGEONTOPICFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsnt_NoCurrentMessageOnTopicFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "NoCurrentMessageOnTopicFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_INVALIDTOPICEXPRESSIONFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsnt_InvalidTopicExpressionFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "InvalidTopicExpressionFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_TOPICNOTSUPPORTEDFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsnt_TopicNotSupportedFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "TopicNotSupportedFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("GetCurrentMessage");
            goto exit;
        }         

        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        soap_fault.detail->element->local = NULL;
        soap_fault.detail->element->Namespace = NULL;
	soap_fault.detail->any_info = NULL;
        xsd_any_destroy(soap_fault.detail);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free,
            WSADDRESSING_FAULT_NS);
    }
    else if(result != GLOBUS_SUCCESS)
    {
        globus_result_t                 local_result;
        local_result = globus_service_session_begin_response(
            callback_handle->message);
        if(local_result != GLOBUS_SUCCESS)
        {
            result = local_result;
            goto exit;
        }

        soap_fault.faultcode = "Server";
        soap_fault.faultstring = globus_error_print_friendly(
            globus_error_get(result));
        result = GLOBUS_SUCCESS;
        soap_fault.faultactor = NULL;
        soap_fault.detail = NULL;
        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            WSADDRESSING_FAULT_NS);
    }
    else
    {
        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        element_qname.local = "GetCurrentMessageResponse";
        element_qname.Namespace = "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd";

        result = wsnt_GetCurrentMessageResponseType_serialize(
            &element_qname,
            &GetCurrentMessageResponse,
            callback_handle->message,
            GLOBUS_XSD_ELEMENT_SET_DEFAULT_NS);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        result = globus_service_session_end_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        wsnt_GetCurrentMessageResponseType_destroy_contents(
            &GetCurrentMessageResponse);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification/GetCurrentMessageResponse");
    }

 exit:

    callback_handle->callback(
        result,
        callback_handle->args);

    globus_libc_free(callback_handle);

    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
GetCurrentMessage_invoke(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_service_response_t *             response,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    GetCurrentMessage_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(GridFTPServerInfoPortType_GetCurrentMessage);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(GetCurrentMessage_callback_handle_t));
    if(!callback_handle)
    {
        result = GlobusSoapMessageErrorOutOfMemory;
        goto exit;
    }
    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        GetCurrentMessage_invoke_callback,
        callback_handle);

 exit:
    GridFTPServerInfoServiceDebugExit();
    return result;
}


static
globus_result_t
GetCurrentMessage_fault_to_type(
    const char *                            fault_type_name,
    int *                                   fault_type,
    globus_xsd_type_info_t *                fault_type_info)
{
    globus_result_t                         result = GLOBUS_SUCCESS;

    *fault_type_info = NULL;

    *fault_type = GetCurrentMessage_lookup_fault_type(fault_type_name);

    switch (*fault_type)
    {
        case GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_RESOURCEUNKNOWNFAULT:
            *fault_type_info = &wsnt_ResourceUnknownFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_NOCURRENTMESSAGEONTOPICFAULT:
            *fault_type_info = &wsnt_NoCurrentMessageOnTopicFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_INVALIDTOPICEXPRESSIONFAULT:
            *fault_type_info = &wsnt_InvalidTopicExpressionFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_GETCURRENTMESSAGE_TOPICNOTSUPPORTEDFAULT:
            *fault_type_info = &wsnt_TopicNotSupportedFaultType_info;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("GetCurrentMessage");
            goto exit;
    }

exit:
    return result;
}


static
globus_service_operation_descriptor_t 
GetCurrentMessage_operation_descriptor =
{
    GetCurrentMessage_deserialize,
    GetCurrentMessage_invoke,

    GetCurrentMessage_fault_to_type

};

static
globus_operation_provider_descriptor_t GetCurrentMessage_descriptor =
{
    &GridFTPServerInfoPortType_GetCurrentMessage_op_qname,
    "GetCurrentMessage",
    (void *)GridFTPServerInfoPortType_GetCurrentMessage_impl,
    NULL
};


xsd_QName GridFTPServerInfoPortType_Subscribe_op_qname = 
{
    "http://localhost:8080/wsrf/services/GridFTPServerInfoService"
    "Subscribe"
};

xsd_QName GridFTPServerInfoPortType_Subscribe_input_qname =
{
     "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd",
     "Subscribe"
};

typedef globus_result_t (* Subscribe_invoke_func_t) (
    globus_service_engine_t             engine,
    globus_soap_message_handle_t        message,
    globus_service_descriptor_t *       descriptor,
    wsnt_SubscribeType * Subscribe,
    wsnt_SubscribeResponseType * SubscribeResponse,
    const char ** fault_type_name,
    void ** fault);
    
typedef struct Subscribe_callback_handle_s
{
    globus_service_engine_t                 engine;
    globus_soap_message_handle_t            message;
    globus_operation_invoke_callback_func_t callback;
    void *                                  args;
} Subscribe_callback_handle_t;


const char * GridFTPServerInfoPortType_Subscribe_fault_strings[GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_TOPICNOTSUPPORTEDFAULT] =
{
    "Unknown",
    "TopicPathDialectUnknownFault",
    "ResourceUnknownFault",
    "SubscribeCreationFailedFault",
    "InvalidTopicExpressionFault",
    "TopicNotSupportedFault"
 };

static
GridFTPServerInfoPortType_Subscribe_fault_t
Subscribe_lookup_fault_type(
    const char *                        fault_name)
{
    GridFTPServerInfoPortType_Subscribe_fault_t fault_type;
    GlobusFuncName(Subscribe_lookup_fault_type);
    GridFTPServerInfoServiceDebugEnter();

    globus_assert(fault_name);

    if(!strcmp(fault_name, "TopicPathDialectUnknownFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_TOPICPATHDIALECTUNKNOWNFAULT;
    }
    else if(!strcmp(fault_name, "ResourceUnknownFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_RESOURCEUNKNOWNFAULT;
    }
    else if(!strcmp(fault_name, "SubscribeCreationFailedFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_SUBSCRIBECREATIONFAILEDFAULT;
    }
    else if(!strcmp(fault_name, "InvalidTopicExpressionFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_INVALIDTOPICEXPRESSIONFAULT;
    }
    else if(!strcmp(fault_name, "TopicNotSupportedFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_TOPICNOTSUPPORTEDFAULT;
    }
    else
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_UNKNOWN_FAULT;
    }

    GridFTPServerInfoServiceDebugExit();
    return fault_type;
}


    
static
void
Subscribe_deserialize_callback(
    void *                              handle)
{
    Subscribe_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    Subscribe_invoke_func_t  invoke_function;
    wsnt_SubscribeType * Subscribe = NULL;
    GlobusFuncName(Subscribe_deserialize_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (Subscribe_callback_handle_t *) handle;

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "Subscribe",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    if(GridFTPServerInfoService_descriptor.registry)
    {
        globus_soap_message_handle_set_registry(
            callback_handle->message,
            GridFTPServerInfoService_descriptor.registry);
    }

    result = wsnt_SubscribeType_init(
        &Subscribe);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = wsnt_SubscribeType_deserialize(
        &GridFTPServerInfoPortType_Subscribe_input_qname,
        Subscribe,
        callback_handle->message,
        0);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = globus_soap_message_handle_set_attr(
        callback_handle->message,
        "SubscribeOperationInputParameter",
        wsnt_SubscribeType_copy_wrapper,
        wsnt_SubscribeType_destroy_wrapper,
        (void *)Subscribe);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

 exit:

    if (Subscribe != NULL)
    {
        wsnt_SubscribeType_destroy(Subscribe);
    }
    callback_handle->callback(
        result,
        callback_handle->args);

    free(callback_handle);
    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
Subscribe_deserialize(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    Subscribe_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(Subscribe_deserialize);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(Subscribe_callback_handle_t));
    globus_assert_string(callback_handle, 
                         "Memory allocation failed "
                         "for Subscribe callback handle");

    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        Subscribe_deserialize_callback,
        callback_handle);

    GridFTPServerInfoServiceDebugExit();
    return result;
}

static
void
Subscribe_invoke_callback(
    void *                              handle)
{
    Subscribe_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    Subscribe_invoke_func_t  invoke_function;
    wsnt_SubscribeType * Subscribe;
    wsnt_SubscribeResponseType SubscribeResponse;
     xsd_QName element_qname;
     const char * fault_type_name = NULL;
     GridFTPServerInfoPortType_Subscribe_fault_t fault_type = GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_NOFAULT;
     void *                              fault = NULL;
    
    GlobusFuncName(Subscribe_invoke_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (Subscribe_callback_handle_t *) handle;

    Subscribe = globus_soap_message_handle_get_attr(
        callback_handle->message,
        "SubscribeOperationInputParameter");
    globus_assert(Subscribe);

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "Subscribe",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }


    result = wsnt_SubscribeResponseType_init_contents(
        &SubscribeResponse);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }

    result = invoke_function(
        callback_handle->engine,
        callback_handle->message,
        &GridFTPServerInfoService_descriptor,
        Subscribe,
        &SubscribeResponse,
        &fault_type_name,
        &fault);

fault_exit:

    if(fault && fault_type_name)
    {
        fault_type = Subscribe_lookup_fault_type(fault_type_name);

        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }
        
        soap_fault.faultcode = "Server";
        soap_fault.faultstring = 
        "An error occurred while processing the message";
        soap_fault.faultactor = NULL;

        switch(fault_type)
        {
        
        case GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_TOPICPATHDIALECTUNKNOWNFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsnt_TopicPathDialectUnknownFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "TopicPathDialectUnknownFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_RESOURCEUNKNOWNFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsnt_ResourceUnknownFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "ResourceUnknownFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_SUBSCRIBECREATIONFAILEDFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsnt_SubscribeCreationFailedFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "SubscribeCreationFailedFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_INVALIDTOPICEXPRESSIONFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsnt_InvalidTopicExpressionFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "InvalidTopicExpressionFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_TOPICNOTSUPPORTEDFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsnt_TopicNotSupportedFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "TopicNotSupportedFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("Subscribe");
            goto exit;
        }         

        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        soap_fault.detail->element->local = NULL;
        soap_fault.detail->element->Namespace = NULL;
	soap_fault.detail->any_info = NULL;
        xsd_any_destroy(soap_fault.detail);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free,
            WSADDRESSING_FAULT_NS);
    }
    else if(result != GLOBUS_SUCCESS)
    {
        globus_result_t                 local_result;
        local_result = globus_service_session_begin_response(
            callback_handle->message);
        if(local_result != GLOBUS_SUCCESS)
        {
            result = local_result;
            goto exit;
        }

        soap_fault.faultcode = "Server";
        soap_fault.faultstring = globus_error_print_friendly(
            globus_error_get(result));
        result = GLOBUS_SUCCESS;
        soap_fault.faultactor = NULL;
        soap_fault.detail = NULL;
        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            WSADDRESSING_FAULT_NS);
    }
    else
    {
        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        element_qname.local = "SubscribeResponse";
        element_qname.Namespace = "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.xsd";

        result = wsnt_SubscribeResponseType_serialize(
            &element_qname,
            &SubscribeResponse,
            callback_handle->message,
            GLOBUS_XSD_ELEMENT_SET_DEFAULT_NS);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        result = globus_service_session_end_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        wsnt_SubscribeResponseType_destroy_contents(
            &SubscribeResponse);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            "http://docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification/SubscribeResponse");
    }

 exit:

    callback_handle->callback(
        result,
        callback_handle->args);

    globus_libc_free(callback_handle);

    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
Subscribe_invoke(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_service_response_t *             response,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    Subscribe_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(GridFTPServerInfoPortType_Subscribe);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(Subscribe_callback_handle_t));
    if(!callback_handle)
    {
        result = GlobusSoapMessageErrorOutOfMemory;
        goto exit;
    }
    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        Subscribe_invoke_callback,
        callback_handle);

 exit:
    GridFTPServerInfoServiceDebugExit();
    return result;
}


static
globus_result_t
Subscribe_fault_to_type(
    const char *                            fault_type_name,
    int *                                   fault_type,
    globus_xsd_type_info_t *                fault_type_info)
{
    globus_result_t                         result = GLOBUS_SUCCESS;

    *fault_type_info = NULL;

    *fault_type = Subscribe_lookup_fault_type(fault_type_name);

    switch (*fault_type)
    {
        case GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_TOPICPATHDIALECTUNKNOWNFAULT:
            *fault_type_info = &wsnt_TopicPathDialectUnknownFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_RESOURCEUNKNOWNFAULT:
            *fault_type_info = &wsnt_ResourceUnknownFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_SUBSCRIBECREATIONFAILEDFAULT:
            *fault_type_info = &wsnt_SubscribeCreationFailedFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_INVALIDTOPICEXPRESSIONFAULT:
            *fault_type_info = &wsnt_InvalidTopicExpressionFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SUBSCRIBE_TOPICNOTSUPPORTEDFAULT:
            *fault_type_info = &wsnt_TopicNotSupportedFaultType_info;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("Subscribe");
            goto exit;
    }

exit:
    return result;
}


static
globus_service_operation_descriptor_t 
Subscribe_operation_descriptor =
{
    Subscribe_deserialize,
    Subscribe_invoke,

    Subscribe_fault_to_type

};

static
globus_operation_provider_descriptor_t Subscribe_descriptor =
{
    &GridFTPServerInfoPortType_Subscribe_op_qname,
    "Subscribe",
    (void *)GridFTPServerInfoPortType_Subscribe_impl,
    NULL
};


xsd_QName GridFTPServerInfoPortType_GetResourceProperty_op_qname = 
{
    "http://localhost:8080/wsrf/services/GridFTPServerInfoService"
    "GetResourceProperty"
};

xsd_QName GridFTPServerInfoPortType_GetResourceProperty_input_qname =
{
     "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd",
     "GetResourceProperty"
};

typedef globus_result_t (* GetResourceProperty_invoke_func_t) (
    globus_service_engine_t             engine,
    globus_soap_message_handle_t        message,
    globus_service_descriptor_t *       descriptor,
    xsd_QName * GetResourceProperty,
    wsrp_GetResourcePropertyResponseType * GetResourcePropertyResponse,
    const char ** fault_type_name,
    void ** fault);
    
typedef struct GetResourceProperty_callback_handle_s
{
    globus_service_engine_t                 engine;
    globus_soap_message_handle_t            message;
    globus_operation_invoke_callback_func_t callback;
    void *                                  args;
} GetResourceProperty_callback_handle_t;


const char * GridFTPServerInfoPortType_GetResourceProperty_fault_strings[GRIDFTPSERVERINFOPORTTYPE_GETRESOURCEPROPERTY_INVALIDRESOURCEPROPERTYQNAMEFAULT] =
{
    "Unknown",
    "ResourceUnknownFault",
    "InvalidResourcePropertyQNameFault"
 };

static
GridFTPServerInfoPortType_GetResourceProperty_fault_t
GetResourceProperty_lookup_fault_type(
    const char *                        fault_name)
{
    GridFTPServerInfoPortType_GetResourceProperty_fault_t fault_type;
    GlobusFuncName(GetResourceProperty_lookup_fault_type);
    GridFTPServerInfoServiceDebugEnter();

    globus_assert(fault_name);

    if(!strcmp(fault_name, "ResourceUnknownFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_GETRESOURCEPROPERTY_RESOURCEUNKNOWNFAULT;
    }
    else if(!strcmp(fault_name, "InvalidResourcePropertyQNameFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_GETRESOURCEPROPERTY_INVALIDRESOURCEPROPERTYQNAMEFAULT;
    }
    else
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_GETRESOURCEPROPERTY_UNKNOWN_FAULT;
    }

    GridFTPServerInfoServiceDebugExit();
    return fault_type;
}


    
static
void
GetResourceProperty_deserialize_callback(
    void *                              handle)
{
    GetResourceProperty_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    GetResourceProperty_invoke_func_t  invoke_function;
    xsd_QName * GetResourceProperty = NULL;
    GlobusFuncName(GetResourceProperty_deserialize_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (GetResourceProperty_callback_handle_t *) handle;

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "GetResourceProperty",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    if(GridFTPServerInfoService_descriptor.registry)
    {
        globus_soap_message_handle_set_registry(
            callback_handle->message,
            GridFTPServerInfoService_descriptor.registry);
    }

    result = xsd_QName_init(
        &GetResourceProperty);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = xsd_QName_deserialize(
        &GridFTPServerInfoPortType_GetResourceProperty_input_qname,
        GetResourceProperty,
        callback_handle->message,
        0);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = globus_soap_message_handle_set_attr(
        callback_handle->message,
        "GetResourcePropertyOperationInputParameter",
        xsd_QName_copy_wrapper,
        xsd_QName_destroy_wrapper,
        (void *)GetResourceProperty);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

 exit:

    if (GetResourceProperty != NULL)
    {
        xsd_QName_destroy(GetResourceProperty);
    }
    callback_handle->callback(
        result,
        callback_handle->args);

    free(callback_handle);
    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
GetResourceProperty_deserialize(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    GetResourceProperty_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(GetResourceProperty_deserialize);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(GetResourceProperty_callback_handle_t));
    globus_assert_string(callback_handle, 
                         "Memory allocation failed "
                         "for GetResourceProperty callback handle");

    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        GetResourceProperty_deserialize_callback,
        callback_handle);

    GridFTPServerInfoServiceDebugExit();
    return result;
}

static
void
GetResourceProperty_invoke_callback(
    void *                              handle)
{
    GetResourceProperty_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    GetResourceProperty_invoke_func_t  invoke_function;
    xsd_QName * GetResourceProperty;
    wsrp_GetResourcePropertyResponseType GetResourcePropertyResponse;
     xsd_QName element_qname;
     const char * fault_type_name = NULL;
     GridFTPServerInfoPortType_GetResourceProperty_fault_t fault_type = GRIDFTPSERVERINFOPORTTYPE_GETRESOURCEPROPERTY_NOFAULT;
     void *                              fault = NULL;
    
    GlobusFuncName(GetResourceProperty_invoke_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (GetResourceProperty_callback_handle_t *) handle;

    GetResourceProperty = globus_soap_message_handle_get_attr(
        callback_handle->message,
        "GetResourcePropertyOperationInputParameter");
    globus_assert(GetResourceProperty);

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "GetResourceProperty",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }


    result = wsrp_GetResourcePropertyResponseType_init_contents(
        &GetResourcePropertyResponse);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }

    result = invoke_function(
        callback_handle->engine,
        callback_handle->message,
        &GridFTPServerInfoService_descriptor,
        GetResourceProperty,
        &GetResourcePropertyResponse,
        &fault_type_name,
        &fault);

fault_exit:

    if(fault && fault_type_name)
    {
        fault_type = GetResourceProperty_lookup_fault_type(fault_type_name);

        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }
        
        soap_fault.faultcode = "Server";
        soap_fault.faultstring = 
        "An error occurred while processing the message";
        soap_fault.faultactor = NULL;

        switch(fault_type)
        {
        
        case GRIDFTPSERVERINFOPORTTYPE_GETRESOURCEPROPERTY_RESOURCEUNKNOWNFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_ResourceUnknownFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "ResourceUnknownFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_GETRESOURCEPROPERTY_INVALIDRESOURCEPROPERTYQNAMEFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_InvalidResourcePropertyQNameFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "InvalidResourcePropertyQNameFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("GetResourceProperty");
            goto exit;
        }         

        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        soap_fault.detail->element->local = NULL;
        soap_fault.detail->element->Namespace = NULL;
	soap_fault.detail->any_info = NULL;
        xsd_any_destroy(soap_fault.detail);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free,
            WSADDRESSING_FAULT_NS);
    }
    else if(result != GLOBUS_SUCCESS)
    {
        globus_result_t                 local_result;
        local_result = globus_service_session_begin_response(
            callback_handle->message);
        if(local_result != GLOBUS_SUCCESS)
        {
            result = local_result;
            goto exit;
        }

        soap_fault.faultcode = "Server";
        soap_fault.faultstring = globus_error_print_friendly(
            globus_error_get(result));
        result = GLOBUS_SUCCESS;
        soap_fault.faultactor = NULL;
        soap_fault.detail = NULL;
        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            WSADDRESSING_FAULT_NS);
    }
    else
    {
        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        element_qname.local = "GetResourcePropertyResponse";
        element_qname.Namespace = "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";

        result = wsrp_GetResourcePropertyResponseType_serialize(
            &element_qname,
            &GetResourcePropertyResponse,
            callback_handle->message,
            GLOBUS_XSD_ELEMENT_SET_DEFAULT_NS);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        result = globus_service_session_end_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        wsrp_GetResourcePropertyResponseType_destroy_contents(
            &GetResourcePropertyResponse);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties/GetResourcePropertyResponse");
    }

 exit:

    callback_handle->callback(
        result,
        callback_handle->args);

    globus_libc_free(callback_handle);

    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
GetResourceProperty_invoke(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_service_response_t *             response,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    GetResourceProperty_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(GridFTPServerInfoPortType_GetResourceProperty);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(GetResourceProperty_callback_handle_t));
    if(!callback_handle)
    {
        result = GlobusSoapMessageErrorOutOfMemory;
        goto exit;
    }
    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        GetResourceProperty_invoke_callback,
        callback_handle);

 exit:
    GridFTPServerInfoServiceDebugExit();
    return result;
}


static
globus_result_t
GetResourceProperty_fault_to_type(
    const char *                            fault_type_name,
    int *                                   fault_type,
    globus_xsd_type_info_t *                fault_type_info)
{
    globus_result_t                         result = GLOBUS_SUCCESS;

    *fault_type_info = NULL;

    *fault_type = GetResourceProperty_lookup_fault_type(fault_type_name);

    switch (*fault_type)
    {
        case GRIDFTPSERVERINFOPORTTYPE_GETRESOURCEPROPERTY_RESOURCEUNKNOWNFAULT:
            *fault_type_info = &wsrp_ResourceUnknownFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_GETRESOURCEPROPERTY_INVALIDRESOURCEPROPERTYQNAMEFAULT:
            *fault_type_info = &wsrp_InvalidResourcePropertyQNameFaultType_info;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("GetResourceProperty");
            goto exit;
    }

exit:
    return result;
}


static
globus_service_operation_descriptor_t 
GetResourceProperty_operation_descriptor =
{
    GetResourceProperty_deserialize,
    GetResourceProperty_invoke,

    GetResourceProperty_fault_to_type

};

static
globus_operation_provider_descriptor_t GetResourceProperty_descriptor =
{
    &GridFTPServerInfoPortType_GetResourceProperty_op_qname,
    "GetResourceProperty",
    (void *)GridFTPServerInfoPortType_GetResourceProperty_impl,
    NULL
};


xsd_QName GridFTPServerInfoPortType_GetMultipleResourceProperties_op_qname = 
{
    "http://localhost:8080/wsrf/services/GridFTPServerInfoService"
    "GetMultipleResourceProperties"
};

xsd_QName GridFTPServerInfoPortType_GetMultipleResourceProperties_input_qname =
{
     "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd",
     "GetMultipleResourceProperties"
};

typedef globus_result_t (* GetMultipleResourceProperties_invoke_func_t) (
    globus_service_engine_t             engine,
    globus_soap_message_handle_t        message,
    globus_service_descriptor_t *       descriptor,
    wsrp_GetMultipleResourcePropertiesType * GetMultipleResourceProperties,
    wsrp_GetMultipleResourcePropertiesResponseType * GetMultipleResourcePropertiesResponse,
    const char ** fault_type_name,
    void ** fault);
    
typedef struct GetMultipleResourceProperties_callback_handle_s
{
    globus_service_engine_t                 engine;
    globus_soap_message_handle_t            message;
    globus_operation_invoke_callback_func_t callback;
    void *                                  args;
} GetMultipleResourceProperties_callback_handle_t;


const char * GridFTPServerInfoPortType_GetMultipleResourceProperties_fault_strings[GRIDFTPSERVERINFOPORTTYPE_GETMULTIPLERESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT] =
{
    "Unknown",
    "ResourceUnknownFault",
    "InvalidResourcePropertyQNameFault"
 };

static
GridFTPServerInfoPortType_GetMultipleResourceProperties_fault_t
GetMultipleResourceProperties_lookup_fault_type(
    const char *                        fault_name)
{
    GridFTPServerInfoPortType_GetMultipleResourceProperties_fault_t fault_type;
    GlobusFuncName(GetMultipleResourceProperties_lookup_fault_type);
    GridFTPServerInfoServiceDebugEnter();

    globus_assert(fault_name);

    if(!strcmp(fault_name, "ResourceUnknownFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_GETMULTIPLERESOURCEPROPERTIES_RESOURCEUNKNOWNFAULT;
    }
    else if(!strcmp(fault_name, "InvalidResourcePropertyQNameFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_GETMULTIPLERESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT;
    }
    else
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_GETMULTIPLERESOURCEPROPERTIES_UNKNOWN_FAULT;
    }

    GridFTPServerInfoServiceDebugExit();
    return fault_type;
}


    
static
void
GetMultipleResourceProperties_deserialize_callback(
    void *                              handle)
{
    GetMultipleResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    GetMultipleResourceProperties_invoke_func_t  invoke_function;
    wsrp_GetMultipleResourcePropertiesType * GetMultipleResourceProperties = NULL;
    GlobusFuncName(GetMultipleResourceProperties_deserialize_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (GetMultipleResourceProperties_callback_handle_t *) handle;

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "GetMultipleResourceProperties",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    if(GridFTPServerInfoService_descriptor.registry)
    {
        globus_soap_message_handle_set_registry(
            callback_handle->message,
            GridFTPServerInfoService_descriptor.registry);
    }

    result = wsrp_GetMultipleResourcePropertiesType_init(
        &GetMultipleResourceProperties);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = wsrp_GetMultipleResourcePropertiesType_deserialize(
        &GridFTPServerInfoPortType_GetMultipleResourceProperties_input_qname,
        GetMultipleResourceProperties,
        callback_handle->message,
        0);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = globus_soap_message_handle_set_attr(
        callback_handle->message,
        "GetMultipleResourcePropertiesOperationInputParameter",
        wsrp_GetMultipleResourcePropertiesType_copy_wrapper,
        wsrp_GetMultipleResourcePropertiesType_destroy_wrapper,
        (void *)GetMultipleResourceProperties);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

 exit:

    if (GetMultipleResourceProperties != NULL)
    {
        wsrp_GetMultipleResourcePropertiesType_destroy(GetMultipleResourceProperties);
    }
    callback_handle->callback(
        result,
        callback_handle->args);

    free(callback_handle);
    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
GetMultipleResourceProperties_deserialize(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    GetMultipleResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(GetMultipleResourceProperties_deserialize);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(GetMultipleResourceProperties_callback_handle_t));
    globus_assert_string(callback_handle, 
                         "Memory allocation failed "
                         "for GetMultipleResourceProperties callback handle");

    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        GetMultipleResourceProperties_deserialize_callback,
        callback_handle);

    GridFTPServerInfoServiceDebugExit();
    return result;
}

static
void
GetMultipleResourceProperties_invoke_callback(
    void *                              handle)
{
    GetMultipleResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    GetMultipleResourceProperties_invoke_func_t  invoke_function;
    wsrp_GetMultipleResourcePropertiesType * GetMultipleResourceProperties;
    wsrp_GetMultipleResourcePropertiesResponseType GetMultipleResourcePropertiesResponse;
     xsd_QName element_qname;
     const char * fault_type_name = NULL;
     GridFTPServerInfoPortType_GetMultipleResourceProperties_fault_t fault_type = GRIDFTPSERVERINFOPORTTYPE_GETMULTIPLERESOURCEPROPERTIES_NOFAULT;
     void *                              fault = NULL;
    
    GlobusFuncName(GetMultipleResourceProperties_invoke_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (GetMultipleResourceProperties_callback_handle_t *) handle;

    GetMultipleResourceProperties = globus_soap_message_handle_get_attr(
        callback_handle->message,
        "GetMultipleResourcePropertiesOperationInputParameter");
    globus_assert(GetMultipleResourceProperties);

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "GetMultipleResourceProperties",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }


    result = wsrp_GetMultipleResourcePropertiesResponseType_init_contents(
        &GetMultipleResourcePropertiesResponse);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }

    result = invoke_function(
        callback_handle->engine,
        callback_handle->message,
        &GridFTPServerInfoService_descriptor,
        GetMultipleResourceProperties,
        &GetMultipleResourcePropertiesResponse,
        &fault_type_name,
        &fault);

fault_exit:

    if(fault && fault_type_name)
    {
        fault_type = GetMultipleResourceProperties_lookup_fault_type(fault_type_name);

        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }
        
        soap_fault.faultcode = "Server";
        soap_fault.faultstring = 
        "An error occurred while processing the message";
        soap_fault.faultactor = NULL;

        switch(fault_type)
        {
        
        case GRIDFTPSERVERINFOPORTTYPE_GETMULTIPLERESOURCEPROPERTIES_RESOURCEUNKNOWNFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_ResourceUnknownFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "ResourceUnknownFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_GETMULTIPLERESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_InvalidResourcePropertyQNameFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "InvalidResourcePropertyQNameFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("GetMultipleResourceProperties");
            goto exit;
        }         

        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        soap_fault.detail->element->local = NULL;
        soap_fault.detail->element->Namespace = NULL;
	soap_fault.detail->any_info = NULL;
        xsd_any_destroy(soap_fault.detail);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free,
            WSADDRESSING_FAULT_NS);
    }
    else if(result != GLOBUS_SUCCESS)
    {
        globus_result_t                 local_result;
        local_result = globus_service_session_begin_response(
            callback_handle->message);
        if(local_result != GLOBUS_SUCCESS)
        {
            result = local_result;
            goto exit;
        }

        soap_fault.faultcode = "Server";
        soap_fault.faultstring = globus_error_print_friendly(
            globus_error_get(result));
        result = GLOBUS_SUCCESS;
        soap_fault.faultactor = NULL;
        soap_fault.detail = NULL;
        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            WSADDRESSING_FAULT_NS);
    }
    else
    {
        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        element_qname.local = "GetMultipleResourcePropertiesResponse";
        element_qname.Namespace = "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";

        result = wsrp_GetMultipleResourcePropertiesResponseType_serialize(
            &element_qname,
            &GetMultipleResourcePropertiesResponse,
            callback_handle->message,
            GLOBUS_XSD_ELEMENT_SET_DEFAULT_NS);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        result = globus_service_session_end_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        wsrp_GetMultipleResourcePropertiesResponseType_destroy_contents(
            &GetMultipleResourcePropertiesResponse);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties/GetMultipleResourcePropertiesResponse");
    }

 exit:

    callback_handle->callback(
        result,
        callback_handle->args);

    globus_libc_free(callback_handle);

    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
GetMultipleResourceProperties_invoke(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_service_response_t *             response,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    GetMultipleResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(GridFTPServerInfoPortType_GetMultipleResourceProperties);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(GetMultipleResourceProperties_callback_handle_t));
    if(!callback_handle)
    {
        result = GlobusSoapMessageErrorOutOfMemory;
        goto exit;
    }
    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        GetMultipleResourceProperties_invoke_callback,
        callback_handle);

 exit:
    GridFTPServerInfoServiceDebugExit();
    return result;
}


static
globus_result_t
GetMultipleResourceProperties_fault_to_type(
    const char *                            fault_type_name,
    int *                                   fault_type,
    globus_xsd_type_info_t *                fault_type_info)
{
    globus_result_t                         result = GLOBUS_SUCCESS;

    *fault_type_info = NULL;

    *fault_type = GetMultipleResourceProperties_lookup_fault_type(fault_type_name);

    switch (*fault_type)
    {
        case GRIDFTPSERVERINFOPORTTYPE_GETMULTIPLERESOURCEPROPERTIES_RESOURCEUNKNOWNFAULT:
            *fault_type_info = &wsrp_ResourceUnknownFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_GETMULTIPLERESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT:
            *fault_type_info = &wsrp_InvalidResourcePropertyQNameFaultType_info;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("GetMultipleResourceProperties");
            goto exit;
    }

exit:
    return result;
}


static
globus_service_operation_descriptor_t 
GetMultipleResourceProperties_operation_descriptor =
{
    GetMultipleResourceProperties_deserialize,
    GetMultipleResourceProperties_invoke,

    GetMultipleResourceProperties_fault_to_type

};

static
globus_operation_provider_descriptor_t GetMultipleResourceProperties_descriptor =
{
    &GridFTPServerInfoPortType_GetMultipleResourceProperties_op_qname,
    "GetMultipleResourceProperties",
    (void *)GridFTPServerInfoPortType_GetMultipleResourceProperties_impl,
    NULL
};


xsd_QName GridFTPServerInfoPortType_SetResourceProperties_op_qname = 
{
    "http://localhost:8080/wsrf/services/GridFTPServerInfoService"
    "SetResourceProperties"
};

xsd_QName GridFTPServerInfoPortType_SetResourceProperties_input_qname =
{
     "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd",
     "SetResourceProperties"
};

typedef globus_result_t (* SetResourceProperties_invoke_func_t) (
    globus_service_engine_t             engine,
    globus_soap_message_handle_t        message,
    globus_service_descriptor_t *       descriptor,
    wsrp_SetResourcePropertiesType * SetResourceProperties,
    wsrp_SetResourcePropertiesResponseType * SetResourcePropertiesResponse,
    const char ** fault_type_name,
    void ** fault);
    
typedef struct SetResourceProperties_callback_handle_s
{
    globus_service_engine_t                 engine;
    globus_soap_message_handle_t            message;
    globus_operation_invoke_callback_func_t callback;
    void *                                  args;
} SetResourceProperties_callback_handle_t;


const char * GridFTPServerInfoPortType_SetResourceProperties_fault_strings[GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT] =
{
    "Unknown",
    "InvalidSetResourcePropertiesRequestContentFault",
    "ResourceUnknownFault",
    "SetResourcePropertyRequestFailedFault",
    "UnableToModifyResourcePropertyFault",
    "InvalidResourcePropertyQNameFault"
 };

static
GridFTPServerInfoPortType_SetResourceProperties_fault_t
SetResourceProperties_lookup_fault_type(
    const char *                        fault_name)
{
    GridFTPServerInfoPortType_SetResourceProperties_fault_t fault_type;
    GlobusFuncName(SetResourceProperties_lookup_fault_type);
    GridFTPServerInfoServiceDebugEnter();

    globus_assert(fault_name);

    if(!strcmp(fault_name, "InvalidSetResourcePropertiesRequestContentFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_INVALIDSETRESOURCEPROPERTIESREQUESTCONTENTFAULT;
    }
    else if(!strcmp(fault_name, "ResourceUnknownFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_RESOURCEUNKNOWNFAULT;
    }
    else if(!strcmp(fault_name, "SetResourcePropertyRequestFailedFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_SETRESOURCEPROPERTYREQUESTFAILEDFAULT;
    }
    else if(!strcmp(fault_name, "UnableToModifyResourcePropertyFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_UNABLETOMODIFYRESOURCEPROPERTYFAULT;
    }
    else if(!strcmp(fault_name, "InvalidResourcePropertyQNameFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT;
    }
    else
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_UNKNOWN_FAULT;
    }

    GridFTPServerInfoServiceDebugExit();
    return fault_type;
}


    
static
void
SetResourceProperties_deserialize_callback(
    void *                              handle)
{
    SetResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    SetResourceProperties_invoke_func_t  invoke_function;
    wsrp_SetResourcePropertiesType * SetResourceProperties = NULL;
    GlobusFuncName(SetResourceProperties_deserialize_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (SetResourceProperties_callback_handle_t *) handle;

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "SetResourceProperties",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    if(GridFTPServerInfoService_descriptor.registry)
    {
        globus_soap_message_handle_set_registry(
            callback_handle->message,
            GridFTPServerInfoService_descriptor.registry);
    }

    result = wsrp_SetResourcePropertiesType_init(
        &SetResourceProperties);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = wsrp_SetResourcePropertiesType_deserialize(
        &GridFTPServerInfoPortType_SetResourceProperties_input_qname,
        SetResourceProperties,
        callback_handle->message,
        0);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = globus_soap_message_handle_set_attr(
        callback_handle->message,
        "SetResourcePropertiesOperationInputParameter",
        wsrp_SetResourcePropertiesType_copy_wrapper,
        wsrp_SetResourcePropertiesType_destroy_wrapper,
        (void *)SetResourceProperties);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

 exit:

    if (SetResourceProperties != NULL)
    {
        wsrp_SetResourcePropertiesType_destroy(SetResourceProperties);
    }
    callback_handle->callback(
        result,
        callback_handle->args);

    free(callback_handle);
    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
SetResourceProperties_deserialize(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    SetResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(SetResourceProperties_deserialize);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(SetResourceProperties_callback_handle_t));
    globus_assert_string(callback_handle, 
                         "Memory allocation failed "
                         "for SetResourceProperties callback handle");

    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        SetResourceProperties_deserialize_callback,
        callback_handle);

    GridFTPServerInfoServiceDebugExit();
    return result;
}

static
void
SetResourceProperties_invoke_callback(
    void *                              handle)
{
    SetResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    SetResourceProperties_invoke_func_t  invoke_function;
    wsrp_SetResourcePropertiesType * SetResourceProperties;
    wsrp_SetResourcePropertiesResponseType SetResourcePropertiesResponse;
     xsd_QName element_qname;
     const char * fault_type_name = NULL;
     GridFTPServerInfoPortType_SetResourceProperties_fault_t fault_type = GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_NOFAULT;
     void *                              fault = NULL;
    
    GlobusFuncName(SetResourceProperties_invoke_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (SetResourceProperties_callback_handle_t *) handle;

    SetResourceProperties = globus_soap_message_handle_get_attr(
        callback_handle->message,
        "SetResourcePropertiesOperationInputParameter");
    globus_assert(SetResourceProperties);

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "SetResourceProperties",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }


    result = wsrp_SetResourcePropertiesResponseType_init_contents(
        &SetResourcePropertiesResponse);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }

    result = invoke_function(
        callback_handle->engine,
        callback_handle->message,
        &GridFTPServerInfoService_descriptor,
        SetResourceProperties,
        &SetResourcePropertiesResponse,
        &fault_type_name,
        &fault);

fault_exit:

    if(fault && fault_type_name)
    {
        fault_type = SetResourceProperties_lookup_fault_type(fault_type_name);

        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }
        
        soap_fault.faultcode = "Server";
        soap_fault.faultstring = 
        "An error occurred while processing the message";
        soap_fault.faultactor = NULL;

        switch(fault_type)
        {
        
        case GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_INVALIDSETRESOURCEPROPERTIESREQUESTCONTENTFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_InvalidSetResourcePropertiesRequestContentFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "InvalidSetResourcePropertiesRequestContentFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_RESOURCEUNKNOWNFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_ResourceUnknownFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "ResourceUnknownFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_SETRESOURCEPROPERTYREQUESTFAILEDFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_SetResourcePropertyRequestFailedFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "SetResourcePropertyRequestFailedFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_UNABLETOMODIFYRESOURCEPROPERTYFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_UnableToModifyResourcePropertyFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "UnableToModifyResourcePropertyFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_InvalidResourcePropertyQNameFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "InvalidResourcePropertyQNameFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("SetResourceProperties");
            goto exit;
        }         

        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        soap_fault.detail->element->local = NULL;
        soap_fault.detail->element->Namespace = NULL;
	soap_fault.detail->any_info = NULL;
        xsd_any_destroy(soap_fault.detail);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free,
            WSADDRESSING_FAULT_NS);
    }
    else if(result != GLOBUS_SUCCESS)
    {
        globus_result_t                 local_result;
        local_result = globus_service_session_begin_response(
            callback_handle->message);
        if(local_result != GLOBUS_SUCCESS)
        {
            result = local_result;
            goto exit;
        }

        soap_fault.faultcode = "Server";
        soap_fault.faultstring = globus_error_print_friendly(
            globus_error_get(result));
        result = GLOBUS_SUCCESS;
        soap_fault.faultactor = NULL;
        soap_fault.detail = NULL;
        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            WSADDRESSING_FAULT_NS);
    }
    else
    {
        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        element_qname.local = "SetResourcePropertiesResponse";
        element_qname.Namespace = "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";

        result = wsrp_SetResourcePropertiesResponseType_serialize(
            &element_qname,
            &SetResourcePropertiesResponse,
            callback_handle->message,
            GLOBUS_XSD_ELEMENT_SET_DEFAULT_NS);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        result = globus_service_session_end_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        wsrp_SetResourcePropertiesResponseType_destroy_contents(
            &SetResourcePropertiesResponse);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties/SetResourcePropertiesResponse");
    }

 exit:

    callback_handle->callback(
        result,
        callback_handle->args);

    globus_libc_free(callback_handle);

    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
SetResourceProperties_invoke(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_service_response_t *             response,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    SetResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(GridFTPServerInfoPortType_SetResourceProperties);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(SetResourceProperties_callback_handle_t));
    if(!callback_handle)
    {
        result = GlobusSoapMessageErrorOutOfMemory;
        goto exit;
    }
    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        SetResourceProperties_invoke_callback,
        callback_handle);

 exit:
    GridFTPServerInfoServiceDebugExit();
    return result;
}


static
globus_result_t
SetResourceProperties_fault_to_type(
    const char *                            fault_type_name,
    int *                                   fault_type,
    globus_xsd_type_info_t *                fault_type_info)
{
    globus_result_t                         result = GLOBUS_SUCCESS;

    *fault_type_info = NULL;

    *fault_type = SetResourceProperties_lookup_fault_type(fault_type_name);

    switch (*fault_type)
    {
        case GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_INVALIDSETRESOURCEPROPERTIESREQUESTCONTENTFAULT:
            *fault_type_info = &wsrp_InvalidSetResourcePropertiesRequestContentFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_RESOURCEUNKNOWNFAULT:
            *fault_type_info = &wsrp_ResourceUnknownFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_SETRESOURCEPROPERTYREQUESTFAILEDFAULT:
            *fault_type_info = &wsrp_SetResourcePropertyRequestFailedFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_UNABLETOMODIFYRESOURCEPROPERTYFAULT:
            *fault_type_info = &wsrp_UnableToModifyResourcePropertyFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_SETRESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT:
            *fault_type_info = &wsrp_InvalidResourcePropertyQNameFaultType_info;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("SetResourceProperties");
            goto exit;
    }

exit:
    return result;
}


static
globus_service_operation_descriptor_t 
SetResourceProperties_operation_descriptor =
{
    SetResourceProperties_deserialize,
    SetResourceProperties_invoke,

    SetResourceProperties_fault_to_type

};

static
globus_operation_provider_descriptor_t SetResourceProperties_descriptor =
{
    &GridFTPServerInfoPortType_SetResourceProperties_op_qname,
    "SetResourceProperties",
    (void *)GridFTPServerInfoPortType_SetResourceProperties_impl,
    NULL
};


xsd_QName GridFTPServerInfoPortType_QueryResourceProperties_op_qname = 
{
    "http://localhost:8080/wsrf/services/GridFTPServerInfoService"
    "QueryResourceProperties"
};

xsd_QName GridFTPServerInfoPortType_QueryResourceProperties_input_qname =
{
     "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd",
     "QueryResourceProperties"
};

typedef globus_result_t (* QueryResourceProperties_invoke_func_t) (
    globus_service_engine_t             engine,
    globus_soap_message_handle_t        message,
    globus_service_descriptor_t *       descriptor,
    wsrp_QueryResourcePropertiesType * QueryResourceProperties,
    wsrp_QueryResourcePropertiesResponseType * QueryResourcePropertiesResponse,
    const char ** fault_type_name,
    void ** fault);
    
typedef struct QueryResourceProperties_callback_handle_s
{
    globus_service_engine_t                 engine;
    globus_soap_message_handle_t            message;
    globus_operation_invoke_callback_func_t callback;
    void *                                  args;
} QueryResourceProperties_callback_handle_t;


const char * GridFTPServerInfoPortType_QueryResourceProperties_fault_strings[GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT] =
{
    "Unknown",
    "UnknownQueryExpressionDialectFault",
    "ResourceUnknownFault",
    "QueryEvaluationErrorFault",
    "InvalidQueryExpressionFault",
    "InvalidResourcePropertyQNameFault"
 };

static
GridFTPServerInfoPortType_QueryResourceProperties_fault_t
QueryResourceProperties_lookup_fault_type(
    const char *                        fault_name)
{
    GridFTPServerInfoPortType_QueryResourceProperties_fault_t fault_type;
    GlobusFuncName(QueryResourceProperties_lookup_fault_type);
    GridFTPServerInfoServiceDebugEnter();

    globus_assert(fault_name);

    if(!strcmp(fault_name, "UnknownQueryExpressionDialectFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_UNKNOWNQUERYEXPRESSIONDIALECTFAULT;
    }
    else if(!strcmp(fault_name, "ResourceUnknownFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_RESOURCEUNKNOWNFAULT;
    }
    else if(!strcmp(fault_name, "QueryEvaluationErrorFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_QUERYEVALUATIONERRORFAULT;
    }
    else if(!strcmp(fault_name, "InvalidQueryExpressionFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_INVALIDQUERYEXPRESSIONFAULT;
    }
    else if(!strcmp(fault_name, "InvalidResourcePropertyQNameFault"))
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT;
    }
    else
    {
        fault_type = GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_UNKNOWN_FAULT;
    }

    GridFTPServerInfoServiceDebugExit();
    return fault_type;
}


    
static
void
QueryResourceProperties_deserialize_callback(
    void *                              handle)
{
    QueryResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    QueryResourceProperties_invoke_func_t  invoke_function;
    wsrp_QueryResourcePropertiesType * QueryResourceProperties = NULL;
    GlobusFuncName(QueryResourceProperties_deserialize_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (QueryResourceProperties_callback_handle_t *) handle;

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "QueryResourceProperties",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    if(GridFTPServerInfoService_descriptor.registry)
    {
        globus_soap_message_handle_set_registry(
            callback_handle->message,
            GridFTPServerInfoService_descriptor.registry);
    }

    result = wsrp_QueryResourcePropertiesType_init(
        &QueryResourceProperties);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = wsrp_QueryResourcePropertiesType_deserialize(
        &GridFTPServerInfoPortType_QueryResourceProperties_input_qname,
        QueryResourceProperties,
        callback_handle->message,
        0);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

    result = globus_soap_message_handle_set_attr(
        callback_handle->message,
        "QueryResourcePropertiesOperationInputParameter",
        wsrp_QueryResourcePropertiesType_copy_wrapper,
        wsrp_QueryResourcePropertiesType_destroy_wrapper,
        (void *)QueryResourceProperties);
    if(result != GLOBUS_SUCCESS)
    {
        goto exit;
    }

 exit:

    if (QueryResourceProperties != NULL)
    {
        wsrp_QueryResourcePropertiesType_destroy(QueryResourceProperties);
    }
    callback_handle->callback(
        result,
        callback_handle->args);

    free(callback_handle);
    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
QueryResourceProperties_deserialize(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    QueryResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(QueryResourceProperties_deserialize);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(QueryResourceProperties_callback_handle_t));
    globus_assert_string(callback_handle, 
                         "Memory allocation failed "
                         "for QueryResourceProperties callback handle");

    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        QueryResourceProperties_deserialize_callback,
        callback_handle);

    GridFTPServerInfoServiceDebugExit();
    return result;
}

static
void
QueryResourceProperties_invoke_callback(
    void *                              handle)
{
    QueryResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                     result = GLOBUS_SUCCESS;
    struct globus_soap_message_fault_s  soap_fault;
    QueryResourceProperties_invoke_func_t  invoke_function;
    wsrp_QueryResourcePropertiesType * QueryResourceProperties;
    wsrp_QueryResourcePropertiesResponseType QueryResourcePropertiesResponse;
     xsd_QName element_qname;
     const char * fault_type_name = NULL;
     GridFTPServerInfoPortType_QueryResourceProperties_fault_t fault_type = GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_NOFAULT;
     void *                              fault = NULL;
    
    GlobusFuncName(QueryResourceProperties_invoke_callback);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = (QueryResourceProperties_callback_handle_t *) handle;

    QueryResourceProperties = globus_soap_message_handle_get_attr(
        callback_handle->message,
        "QueryResourcePropertiesOperationInputParameter");
    globus_assert(QueryResourceProperties);

    result = globus_operation_table_get_operation(
        GridFTPServerInfoService_descriptor.operations,
        "QueryResourceProperties",
        (void **)&invoke_function);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }


    result = wsrp_QueryResourcePropertiesResponseType_init_contents(
        &QueryResourcePropertiesResponse);
    if(result != GLOBUS_SUCCESS)
    {
        goto fault_exit;
    }

    result = invoke_function(
        callback_handle->engine,
        callback_handle->message,
        &GridFTPServerInfoService_descriptor,
        QueryResourceProperties,
        &QueryResourcePropertiesResponse,
        &fault_type_name,
        &fault);

fault_exit:

    if(fault && fault_type_name)
    {
        fault_type = QueryResourceProperties_lookup_fault_type(fault_type_name);

        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }
        
        soap_fault.faultcode = "Server";
        soap_fault.faultstring = 
        "An error occurred while processing the message";
        soap_fault.faultactor = NULL;

        switch(fault_type)
        {
        
        case GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_UNKNOWNQUERYEXPRESSIONDIALECTFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_UnknownQueryExpressionDialectFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "UnknownQueryExpressionDialectFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_RESOURCEUNKNOWNFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_ResourceUnknownFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "ResourceUnknownFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_QUERYEVALUATIONERRORFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_QueryEvaluationErrorFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "QueryEvaluationErrorFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_INVALIDQUERYEXPRESSIONFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_InvalidQueryExpressionFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "InvalidQueryExpressionFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT:

            xsd_any_init(&soap_fault.detail);
            soap_fault.detail->any_info = &wsrp_InvalidResourcePropertyQNameFaultType_info;
            xsd_QName_init(&soap_fault.detail->element);
            soap_fault.detail->element->local = "InvalidResourcePropertyQNameFault";
            soap_fault.detail->element->Namespace = 
                "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";
            soap_fault.detail->value = fault;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("QueryResourceProperties");
            goto exit;
        }         

        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        soap_fault.detail->element->local = NULL;
        soap_fault.detail->element->Namespace = NULL;
	soap_fault.detail->any_info = NULL;
        xsd_any_destroy(soap_fault.detail);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free,
            WSADDRESSING_FAULT_NS);
    }
    else if(result != GLOBUS_SUCCESS)
    {
        globus_result_t                 local_result;
        local_result = globus_service_session_begin_response(
            callback_handle->message);
        if(local_result != GLOBUS_SUCCESS)
        {
            result = local_result;
            goto exit;
        }

        soap_fault.faultcode = "Server";
        soap_fault.faultstring = globus_error_print_friendly(
            globus_error_get(result));
        result = GLOBUS_SUCCESS;
        soap_fault.faultactor = NULL;
        soap_fault.detail = NULL;
        result = globus_service_session_serialize_fault_response(
            callback_handle->message, &soap_fault);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            WSADDRESSING_FAULT_NS);
    }
    else
    {
        result = globus_service_session_begin_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        element_qname.local = "QueryResourcePropertiesResponse";
        element_qname.Namespace = "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.xsd";

        result = wsrp_QueryResourcePropertiesResponseType_serialize(
            &element_qname,
            &QueryResourcePropertiesResponse,
            callback_handle->message,
            GLOBUS_XSD_ELEMENT_SET_DEFAULT_NS);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        result = globus_service_session_end_response(
            callback_handle->message);
        if(result != GLOBUS_SUCCESS)
        {
            goto exit;
        }

        wsrp_QueryResourcePropertiesResponseType_destroy_contents(
            &QueryResourcePropertiesResponse);

        globus_soap_message_handle_set_attr(
            callback_handle->message, 
            WSADDR_ACTION_RESPONSE_KEY,
            globus_soap_message_attr_copy_string,
            globus_libc_free, 
            "http://docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceProperties/QueryResourcePropertiesResponse");
    }

 exit:

    callback_handle->callback(
        result,
        callback_handle->args);

    globus_libc_free(callback_handle);

    GridFTPServerInfoServiceDebugExit();
}

static
globus_result_t
QueryResourceProperties_invoke(
    globus_service_engine_t                 engine,
    globus_soap_message_handle_t            message,
    globus_service_response_t *             response,
    globus_operation_invoke_callback_func_t invoke_callback,
    void *                                  args)
{
    QueryResourceProperties_callback_handle_t * callback_handle;
    globus_result_t                    result = GLOBUS_SUCCESS;
    GlobusFuncName(GridFTPServerInfoPortType_QueryResourceProperties);
    GridFTPServerInfoServiceDebugEnter();

    callback_handle = malloc(sizeof(QueryResourceProperties_callback_handle_t));
    if(!callback_handle)
    {
        result = GlobusSoapMessageErrorOutOfMemory;
        goto exit;
    }
    callback_handle->engine = engine;
    callback_handle->message = message;
    callback_handle->callback = invoke_callback;
    callback_handle->args = args;

    result = globus_callback_register_oneshot(
        NULL,
        &globus_i_reltime_zero,
        QueryResourceProperties_invoke_callback,
        callback_handle);

 exit:
    GridFTPServerInfoServiceDebugExit();
    return result;
}


static
globus_result_t
QueryResourceProperties_fault_to_type(
    const char *                            fault_type_name,
    int *                                   fault_type,
    globus_xsd_type_info_t *                fault_type_info)
{
    globus_result_t                         result = GLOBUS_SUCCESS;

    *fault_type_info = NULL;

    *fault_type = QueryResourceProperties_lookup_fault_type(fault_type_name);

    switch (*fault_type)
    {
        case GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_UNKNOWNQUERYEXPRESSIONDIALECTFAULT:
            *fault_type_info = &wsrp_UnknownQueryExpressionDialectFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_RESOURCEUNKNOWNFAULT:
            *fault_type_info = &wsrp_ResourceUnknownFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_QUERYEVALUATIONERRORFAULT:
            *fault_type_info = &wsrp_QueryEvaluationErrorFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_INVALIDQUERYEXPRESSIONFAULT:
            *fault_type_info = &wsrp_InvalidQueryExpressionFaultType_info;
            break;

        case GRIDFTPSERVERINFOPORTTYPE_QUERYRESOURCEPROPERTIES_INVALIDRESOURCEPROPERTYQNAMEFAULT:
            *fault_type_info = &wsrp_InvalidResourcePropertyQNameFaultType_info;
            break;

        default:
            result = GridFTPServerInfoServiceErrorReturnedUnknownFault("QueryResourceProperties");
            goto exit;
    }

exit:
    return result;
}


static
globus_service_operation_descriptor_t 
QueryResourceProperties_operation_descriptor =
{
    QueryResourceProperties_deserialize,
    QueryResourceProperties_invoke,

    QueryResourceProperties_fault_to_type

};

static
globus_operation_provider_descriptor_t QueryResourceProperties_descriptor =
{
    &GridFTPServerInfoPortType_QueryResourceProperties_op_qname,
    "QueryResourceProperties",
    (void *)GridFTPServerInfoPortType_QueryResourceProperties_impl,
    NULL
};



static xsd_QName GridFTPServerInfoService_l_wsrp_GetResourceProperty_qname;
static xsd_QName GridFTPServerInfoService_l_wsrp_GetMultipleResourceProperties_qname;
static xsd_QName GridFTPServerInfoService_l_wsrp_SetResourceProperties_qname;
static xsd_QName GridFTPServerInfoService_l_wsrp_QueryResourceProperties_qname;
static xsd_QName GridFTPServerInfoService_l_wsrl_Destroy_qname;
static xsd_QName GridFTPServerInfoService_l_wsrl_SetTerminationTime_qname;
static xsd_QName GridFTPServerInfoService_l_wsnt_Subscribe_qname;
static xsd_QName GridFTPServerInfoService_l_wsnt_GetCurrentMessage_qname;

static
int
GridFTPServerInfoService_activate()
{
    globus_result_t                     result = GLOBUS_SUCCESS;
    int                                 rc = 0;
    GlobusFuncName(GridFTPServerInfoService_activate);

    rc = globus_module_activate(GLOBUS_COMMON_MODULE);
    if(rc != GLOBUS_SUCCESS)
    {
        return rc;
    }

    GlobusDebugInit(GRIDFTPSERVERINFOSERVICE, INFO DEBUG TRACE WARN ERROR);

    rc = globus_module_activate(GLOBUS_SOAP_MESSAGE_MODULE);
    if(rc != GLOBUS_SUCCESS)
    {
        return rc;
    }

    GridFTPServerInfoServiceDebugEnter();

    result = globus_module_activate(GLOBUS_WSRF_RESOURCE_MODULE);
    if (result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto exit;
    }

    rc = globus_extension_activate(
        "globus_wsrp_GetResourceProperty_provider");
    if(rc != GLOBUS_SUCCESS)
    {
        goto deactivate_resource_out;
    }

    rc = globus_extension_activate(
            "globus_wsrp_GetMultipleResourceProperties_provider");
    if (rc != GLOBUS_SUCCESS)
    {
        goto deactivate_getrp;
    }

    rc = globus_extension_activate(
            "globus_wsrp_SetResourceProperties_provider");
    if (rc != GLOBUS_SUCCESS)
    {
        goto deactivate_getmrp;
    }

    rc = globus_extension_activate(
            "globus_wsrp_QueryResourceProperties_provider");
    if (rc != GLOBUS_SUCCESS)
    {
        goto deactivate_setrp;
    }

    rc = globus_extension_activate(
            "globus_wsrl_ImmediateResourceTermination_provider");
    if (rc != GLOBUS_SUCCESS)
    {
        goto deactivate_queryrp;
    }

    rc = globus_extension_activate(
            "globus_wsrl_ScheduledResourceTermination_provider");
    if (rc != GLOBUS_SUCCESS)
    {
        goto deactivate_irt;
    }

    rc = globus_extension_activate(
            "globus_wsnt_NotificationProducer_provider");
    if (rc != GLOBUS_SUCCESS)
    {
        goto deactivate_srt;
    }

    if(GLOBUS_GLOBAL_TYPE_REGISTRY != NULL)
    {
        result = GridFTPServerInfoService_registry_add_types(
            GLOBUS_GLOBAL_TYPE_REGISTRY);
        if(result != GLOBUS_SUCCESS)
        {
            rc = (int) result;
            goto deactivate_nrt;
        }
    }

    rc = globus_hashtable_init(
        &GridFTPServerInfoService_descriptor.op_mapper, 
        10, 
        xsd_QName_hash, 
        xsd_QName_keyeq);
    if(rc != GLOBUS_SUCCESS)
    {
        goto clear_global_registry;
    }

    result = globus_xsd_type_registry_init(
        &GridFTPServerInfoService_descriptor.registry);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto destroy_op_mapper;
    }

    result = GridFTPServerInfoService_registry_add_types(
        GridFTPServerInfoService_descriptor.registry);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto destroy_service_registry;
    }

    globus_mutex_init(&GridFTPServerInfoService_descriptor.mutex, NULL);

    rc = globus_hashtable_insert(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_GetCurrentMessage_input_qname,
        (void *)&GetCurrentMessage_operation_descriptor);
    if(rc != GLOBUS_SUCCESS)
    {
        goto remove_GetCurrentMessage_op;
    }

    rc = globus_hashtable_insert(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_Subscribe_input_qname,
        (void *)&Subscribe_operation_descriptor);
    if(rc != GLOBUS_SUCCESS)
    {
        goto remove_Subscribe_op;
    }

    rc = globus_hashtable_insert(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_GetResourceProperty_input_qname,
        (void *)&GetResourceProperty_operation_descriptor);
    if(rc != GLOBUS_SUCCESS)
    {
        goto remove_GetResourceProperty_op;
    }

    rc = globus_hashtable_insert(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_GetMultipleResourceProperties_input_qname,
        (void *)&GetMultipleResourceProperties_operation_descriptor);
    if(rc != GLOBUS_SUCCESS)
    {
        goto remove_GetMultipleResourceProperties_op;
    }

    rc = globus_hashtable_insert(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_SetResourceProperties_input_qname,
        (void *)&SetResourceProperties_operation_descriptor);
    if(rc != GLOBUS_SUCCESS)
    {
        goto remove_SetResourceProperties_op;
    }

    rc = globus_hashtable_insert(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_QueryResourceProperties_input_qname,
        (void *)&QueryResourceProperties_operation_descriptor);
    if(rc != GLOBUS_SUCCESS)
    {
        goto remove_QueryResourceProperties_op;
    }


    result = globus_operation_table_init(
        &GridFTPServerInfoService_descriptor.operations,
        GridFTPServerInfoService_service_qname.Namespace);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_all_ops;
    }


    result = globus_extension_registry_add(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_GetCurrentMessage_op_qname,
        GlobusExtensionMyModule(GridFTPServerInfoService),
        (void *)&GetCurrentMessage_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_GetCurrentMessage_op_provider;
    }

    result = globus_operation_table_add_default_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoPortType_GetCurrentMessage_op_qname,
        &GetCurrentMessage_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_GetCurrentMessage_op_provider;
    }

    result = globus_extension_registry_add(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_Subscribe_op_qname,
        GlobusExtensionMyModule(GridFTPServerInfoService),
        (void *)&Subscribe_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_Subscribe_op_provider;
    }

    result = globus_operation_table_add_default_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoPortType_Subscribe_op_qname,
        &Subscribe_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_Subscribe_op_provider;
    }

    result = globus_extension_registry_add(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_GetResourceProperty_op_qname,
        GlobusExtensionMyModule(GridFTPServerInfoService),
        (void *)&GetResourceProperty_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_GetResourceProperty_op_provider;
    }

    result = globus_operation_table_add_default_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoPortType_GetResourceProperty_op_qname,
        &GetResourceProperty_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_GetResourceProperty_op_provider;
    }

    result = globus_extension_registry_add(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_GetMultipleResourceProperties_op_qname,
        GlobusExtensionMyModule(GridFTPServerInfoService),
        (void *)&GetMultipleResourceProperties_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_GetMultipleResourceProperties_op_provider;
    }

    result = globus_operation_table_add_default_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoPortType_GetMultipleResourceProperties_op_qname,
        &GetMultipleResourceProperties_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_GetMultipleResourceProperties_op_provider;
    }

    result = globus_extension_registry_add(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_SetResourceProperties_op_qname,
        GlobusExtensionMyModule(GridFTPServerInfoService),
        (void *)&SetResourceProperties_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_SetResourceProperties_op_provider;
    }

    result = globus_operation_table_add_default_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoPortType_SetResourceProperties_op_qname,
        &SetResourceProperties_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_SetResourceProperties_op_provider;
    }

    result = globus_extension_registry_add(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_QueryResourceProperties_op_qname,
        GlobusExtensionMyModule(GridFTPServerInfoService),
        (void *)&QueryResourceProperties_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_QueryResourceProperties_op_provider;
    }

    result = globus_operation_table_add_default_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoPortType_QueryResourceProperties_op_qname,
        &QueryResourceProperties_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_QueryResourceProperties_op_provider;
    }

    result = globus_operation_table_add_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoService_l_wsrp_GetResourceProperty_qname);
    if (result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto remove_op_providers;
    }

    result = globus_operation_table_add_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoService_l_wsrp_GetMultipleResourceProperties_qname);
    if (result != GLOBUS_SUCCESS)
    {
        rc = (int) result;

        goto remove_op_providers;
    }

    result = globus_operation_table_add_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoService_l_wsrp_SetResourceProperties_qname);
    if (result != GLOBUS_SUCCESS)
    {
        rc = (int) result;

        goto remove_op_providers;
    }

    result = globus_operation_table_add_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoService_l_wsrp_QueryResourceProperties_qname);
    if (result != GLOBUS_SUCCESS)
    {
        rc = (int) result;

        goto remove_op_providers;
    }

    result = globus_operation_table_add_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoService_l_wsrl_Destroy_qname);
    if (result != GLOBUS_SUCCESS)
    {
        rc = (int) result;

        goto remove_op_providers;
    }

    result = globus_operation_table_add_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoService_l_wsrl_SetTerminationTime_qname);
    if (result != GLOBUS_SUCCESS)
    {
        rc = (int) result;

        goto remove_op_providers;
    }

    result = globus_operation_table_add_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoService_l_wsnt_Subscribe_qname);
    if (result != GLOBUS_SUCCESS)
    {
        rc = (int) result;

        goto remove_op_providers;
    }

    result = globus_operation_table_add_provider(
        GridFTPServerInfoService_descriptor.operations,
        &GridFTPServerInfoService_l_wsnt_GetCurrentMessage_qname);
    if (result != GLOBUS_SUCCESS)
    {
        rc = (int) result;

        goto remove_op_providers;
    }

    rc = globus_extension_registry_add(
        GLOBUS_SERVICE_REGISTRY,
        (void *)GridFTPServerInfoService_descriptor.path,
        GlobusExtensionMyModule(GridFTPServerInfoService),
        &GridFTPServerInfoService_descriptor);
    if(rc != GLOBUS_SUCCESS)
    {
        goto remove_op_providers;
    }

    result = GridFTPServerInfoService_init(&GridFTPServerInfoService_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        rc = (int) result;
        goto service_extension_remove;
    }

    goto exit;

service_extension_remove:
    globus_extension_registry_remove(
        GLOBUS_SERVICE_REGISTRY,
        (void *)GridFTPServerInfoService_descriptor.path);
remove_op_providers:

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_GetCurrentMessage_op_qname);
remove_GetCurrentMessage_op_provider:

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_Subscribe_op_qname);
remove_Subscribe_op_provider:

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_GetResourceProperty_op_qname);
remove_GetResourceProperty_op_provider:

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_GetMultipleResourceProperties_op_qname);
remove_GetMultipleResourceProperties_op_provider:

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_SetResourceProperties_op_qname);
remove_SetResourceProperties_op_provider:

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_QueryResourceProperties_op_qname);
remove_QueryResourceProperties_op_provider:

destroy_op_table:
    globus_operation_table_destroy(GridFTPServerInfoService_descriptor.operations);
remove_all_ops:

    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_GetCurrentMessage_input_qname);
remove_GetCurrentMessage_op:

    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_Subscribe_input_qname);
remove_Subscribe_op:

    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_GetResourceProperty_input_qname);
remove_GetResourceProperty_op:

    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_GetMultipleResourceProperties_input_qname);
remove_GetMultipleResourceProperties_op:

    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_SetResourceProperties_input_qname);
remove_SetResourceProperties_op:

    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_QueryResourceProperties_input_qname);
remove_QueryResourceProperties_op:

destroy_mutex:
    globus_mutex_destroy(&GridFTPServerInfoService_descriptor.mutex);
clear_service_registry:
    GridFTPServerInfoService_registry_remove_types(
        GridFTPServerInfoService_descriptor.registry);
destroy_service_registry:
    globus_xsd_type_registry_destroy(GridFTPServerInfoService_descriptor.registry);
destroy_op_mapper:
    globus_hashtable_destroy(&GridFTPServerInfoService_descriptor.op_mapper);
clear_global_registry:
    if(GLOBUS_GLOBAL_TYPE_REGISTRY != NULL)
    {
        GridFTPServerInfoService_registry_remove_types(
            GLOBUS_GLOBAL_TYPE_REGISTRY);
    }
deactivate_nrt:
    globus_extension_deactivate(
            "globus_wsnt_NotificationProducer_provider");
deactivate_srt:
    globus_extension_deactivate(
            "globus_wsrl_ScheduledResourceTermination_provider");
deactivate_irt:
    globus_extension_deactivate(
            "globus_wsrl_ImmediateResourceTermination_provider");
deactivate_queryrp:
    globus_extension_deactivate(
            "globus_wsrp_QueryResourceProperties_provider");
deactivate_setrp:
    globus_extension_deactivate("globus_wsrp_SetResourceProperties_provider");
deactivate_getmrp:
    globus_extension_deactivate("globus_wsrp_GetMultipleResourceProperties_provider");
deactivate_getrp:
    globus_extension_deactivate("globus_wsrp_GetResourceProperty_provider");
deactivate_resource_out:
    globus_module_deactivate(GLOBUS_WSRF_RESOURCE_MODULE);

 exit:
    GridFTPServerInfoServiceDebugExit();
    return rc;
}

static
int
GridFTPServerInfoService_deactivate()
{
    globus_result_t                     result = GLOBUS_SUCCESS;
    int                                 rc = 0;

    result = GridFTPServerInfoService_finalize(&GridFTPServerInfoService_descriptor);
    if(result != GLOBUS_SUCCESS)
    {
        return GLOBUS_FAILURE;
    }

    globus_extension_registry_remove(
        GLOBUS_SERVICE_REGISTRY,
        (void *)GridFTPServerInfoService_descriptor.path);

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_GetCurrentMessage_op_qname);

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_Subscribe_op_qname);

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_GetResourceProperty_op_qname);

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_GetMultipleResourceProperties_op_qname);

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_SetResourceProperties_op_qname);

    globus_extension_registry_remove(
        GLOBUS_OPERATION_PROVIDER_REGISTRY,
        (void *)&GridFTPServerInfoPortType_QueryResourceProperties_op_qname);

    globus_operation_table_destroy(GridFTPServerInfoService_descriptor.operations);


    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_GetCurrentMessage_input_qname);

    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_Subscribe_input_qname);

    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_GetResourceProperty_input_qname);

    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_GetMultipleResourceProperties_input_qname);

    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_SetResourceProperties_input_qname);

    globus_hashtable_remove(
        &GridFTPServerInfoService_descriptor.op_mapper,
        (void *)&GridFTPServerInfoPortType_QueryResourceProperties_input_qname);


    globus_mutex_destroy(&GridFTPServerInfoService_descriptor.mutex);

    GridFTPServerInfoService_registry_remove_types(
        GridFTPServerInfoService_descriptor.registry);

    globus_xsd_type_registry_destroy(GridFTPServerInfoService_descriptor.registry);

    globus_hashtable_destroy(&GridFTPServerInfoService_descriptor.op_mapper);

    if(GLOBUS_GLOBAL_TYPE_REGISTRY != NULL)
    {
        GridFTPServerInfoService_registry_remove_types(
            GLOBUS_GLOBAL_TYPE_REGISTRY);
    }

    globus_extension_deactivate(
            "globus_wsnt_NotificationProducer_provider");
    globus_extension_deactivate(
            "globus_wsrl_ScheduledResourceTermination_provider");
    globus_extension_deactivate(
            "globus_wsrl_ImmediateResourceTermination_provider");
    globus_extension_deactivate(
            "globus_wsrp_QueryResourceProperties_provider");
    globus_extension_deactivate("globus_wsrp_SetResourceProperties_provider");
    globus_extension_deactivate(
        "globus_wsrp_GetMultipleResourceProperties_provider");
    globus_extension_deactivate("globus_wsrp_GetResourceProperty_provider");
    globus_module_deactivate(GLOBUS_WSRF_RESOURCE_MODULE);

    rc = globus_module_deactivate(GLOBUS_SOAP_MESSAGE_MODULE);
    if(rc != GLOBUS_SUCCESS)
    {
        return rc;
    }

    GlobusDebugDestroy(GRIDFTPSERVERINFOSERVICE);

    rc = globus_module_deactivate(GLOBUS_COMMON_MODULE);
    if(rc != GLOBUS_SUCCESS)
    {
        return rc;
    }

    return rc;
}

#define WSRP_NS "http://www.globus.org/docs.oasis-open.org" \
                "/wsrf/2004/06/wsrf-WS-ResourceProperties-1.2-draft-01.wsdl"

static xsd_QName GridFTPServerInfoService_l_wsrp_GetResourceProperty_qname =
{
    WSRP_NS,
    "GetResourceProperty"
};

static xsd_QName GridFTPServerInfoService_l_wsrp_GetMultipleResourceProperties_qname =
{
    WSRP_NS,
    "GetMultipleResourceProperties"
};

static xsd_QName GridFTPServerInfoService_l_wsrp_SetResourceProperties_qname =
{
    WSRP_NS,
    "SetResourceProperties"
};

static xsd_QName GridFTPServerInfoService_l_wsrp_QueryResourceProperties_qname =
{
    WSRP_NS,
    "QueryResourceProperties"
};

static xsd_QName GridFTPServerInfoService_l_wsrl_Destroy_qname =
{
    "http://www.globus.org/docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceLifetime-1.2-draft-01.wsdl",
    "Destroy"
};

static xsd_QName GridFTPServerInfoService_l_wsrl_SetTerminationTime_qname =
{
    "http://www.globus.org/docs.oasis-open.org/wsrf/2004/06/wsrf-WS-ResourceLifetime-1.2-draft-01.wsdl",
    "SetTerminationTime"
};

static xsd_QName GridFTPServerInfoService_l_wsnt_Subscribe_qname =
{
    "http://www.globus.org/docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.wsdl",
    "Subscribe"
};

static xsd_QName GridFTPServerInfoService_l_wsnt_GetCurrentMessage_qname =
{
    "http://www.globus.org/docs.oasis-open.org/wsn/2004/06/wsn-WS-BaseNotification-1.2-draft-01.wsdl",
    "GetCurrentMessage"
};
