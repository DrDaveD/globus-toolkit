#!/bin/sh

OPTIND=0
while getopts "h:p:n:v" arg ; do
    if [ $arg = "f" ]; then
        host=$OPTARG
    elif [ $arg = "p" ]; then
        port=$OPTARG
    elif [ $arg = "n" ]; then
        count=$OPTARG
    elif [ $arg = "v" ]; then
        verbose=-v
    fi
done

if [ -z $host ]; then
    host=`${GLOBUS_LOCATION}/libexec/globus-libc-hostname`
fi
if [ -z $port ]; then
    port=8080
fi
if [ -z $count ]; then
    echo "ERROR: No job count specified"
    exit
fi

factory="$host:$port/ogsa/services/base/gram/MasterSCHEDULERManagedJobFactoryService"

./stress-test.sh -f $factory -n $count
